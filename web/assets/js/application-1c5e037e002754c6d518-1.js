!function(t){function e(e){for(var i,a,s=e[0],u=e[1],c=e[2],f=0,h=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);for(l&&l(e);h.length;)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={8:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/packs/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;o.push([573,0,1]),n()}([,,,,,,,,,,function(t,e,n){"use strict";var i={appendHTML:function(t,e){var n=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=e;i.hasChildNodes();)n.appendChild(i.firstChild);t.appendChild(n)},prependHTML:function(t,e){var n=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=e;i.hasChildNodes();)n.prepend(i.firstChild);t.prepend(n)},extractHTML:function(t,e){var n=document.createElement("div");return n.innerHTML=t,n.querySelector(e)},showElement:function(t){t.classList.remove("hidden")},hideElement:function(t){t.classList.add("hidden")},isVisible:function(t){return null!=t.offsetParent},enableElement:function(t){t.disabled=!1},disableElement:function(t){t.disabled=!0},setCookie:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Cookies.set(t,e,{expires:n})},waitUntilAppDefined:function(t,e){var n=setInterval((function(){"undefined"!=typeof App&&(t(e),clearInterval(n))}),100)}};e.a=i},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(3),r=n.n(i),o=n(93),a=n.n(o),s=n(94),u=n.n(s);n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394);r.a.locale("fil",r.a.Ls["tl-ph"]),r.a.locale(LOCALE),r.a.extend(a.a),r.a.extend(u.a),e.a=r.a},function(t,e,n){t.exports=n(492)},,,,,,,,,,,function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){"use strict";function i(t,e,n){var r,o=document.createElement("img");return o.onerror=function(r){return i.onerror(o,r,t,e,n)},o.onload=function(r){return i.onload(o,r,t,e,n)},"string"==typeof t?(i.fetchBlob(t,(function(e){e?(t=e,r=i.createObjectURL(t)):(r=t,n&&n.crossOrigin&&(o.crossOrigin=n.crossOrigin)),o.src=r}),n),o):i.isInstanceOf("Blob",t)||i.isInstanceOf("File",t)?(r=o._objectURL=i.createObjectURL(t))?(o.src=r,o):i.readFile(t,(function(t){var n=t.target;n&&n.result?o.src=n.result:e&&e(t)})):void 0}var r=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;function o(t,e){!t._objectURL||e&&e.noRevoke||(i.revokeObjectURL(t._objectURL),delete t._objectURL)}i.fetchBlob=function(t,e,n){e()},i.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},i.transform=function(t,e,n,i,r){n(t,r)},i.onerror=function(t,e,n,i,r){o(t,r),i&&i.call(t,e)},i.onload=function(t,e,n,r,a){o(t,a),r&&i.transform(t,a,r,n,{})},i.createObjectURL=function(t){return!!r&&r.createObjectURL(t)},i.revokeObjectURL=function(t){return!!r&&r.revokeObjectURL(t)},i.readFile=function(t,e,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=e,i[n=n||"readAsDataURL"])return i[n](t),i}return!1},"object"===e(t)&&t.exports?t.exports=i:n.loadImage=i}(window)}).call(this,n(15)(t))},function(t,e,n){"use strict";var i={commentAdded:new CustomEvent("commentAdded",{bubbles:!0}),openEmojiPicker:function(t){return new CustomEvent("openEmojiPicker",{bubbles:!0,detail:{onEmojiSelect:t}})},cookplanUpdated:function(t){return new CustomEvent("cookplanUpdated",{bubbles:!0,detail:{cookplanId:t.cookplan_id,recipeId:t.recipe_id,trayHtml:t.tray_html,toastMessageHtml:t.toast_message_html}})}};e.a=i},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"use strict";"object"===e(t)&&t.exports?i(n(44)):i(window.loadImage)}((function(t){"use strict";var e=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=e&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[]}},t.parseMetaData=function(e,n,i,r){r=r||{};var o=this,a=(i=i||{}).maxMetaDataSize||262144;!!(window.DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice)&&t.readFile(t.blobSlice.call(e,0,a),(function(e){if(e.target.error)return console.log(e.target.error),void n(r);var a,s,u,c,l=e.target.result,f=new DataView(l),h=2,d=f.byteLength-4,p=h;if(65496===f.getUint16(0)){for(;h<d&&((a=f.getUint16(h))>=65504&&a<=65519||65534===a);){if(h+(s=f.getUint16(h+2)+2)>f.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(u=t.metaDataParsers.jpeg[a])for(c=0;c<u.length;c+=1)u[c].call(o,f,h,s,r,i);p=h+=s}!i.disableImageHead&&p>6&&(l.slice?r.imageHead=l.slice(0,p):r.imageHead=new Uint8Array(l).subarray(0,p))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(r)}),"readAsArrayBuffer")||n(r)},t.hasMetaOption=function(t){return t&&t.meta};var n=t.transform;t.transform=function(e,i,r,o,a){t.hasMetaOption(i)?t.parseMetaData(o,(function(a){n.call(t,e,i,r,o,a)}),i,a):n.apply(t,arguments)}}))}).call(this,n(15)(t))},,,,,,,,,,,,,,,,function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(32);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this.update(),this.element.title=Object(r.a)(this.timestamp).format("LLL"),setInterval(this.update.bind(this),6e4)}},{key:"update",value:function(){this.element.textContent=Object(r.a)(this.timestamp).fromNow()}},{key:"timestamp",get:function(){return this._timestamp=this._timestamp||this.element.getAttribute("datetime"),this._timestamp}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(32);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this.element.textContent=Object(r.a)(this.timestamp).format(this.format)}},{key:"timestamp",get:function(){return this.element.getAttribute("datetime")}},{key:"format",get:function(){return this.element.dataset.format||"LLL"}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b)},,,,,function(t,e,n){"use strict";function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={formData:{},dataType:"json",disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator&&navigator.userAgent),imageMaxWidth:1080,imageMaxHeight:1080,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp)$/i,processfail:function(t,e){return alert(e.files[0].error)},fail:function(t,e){return alert(App.genericError)}};e.a=function(t,e,n,a){var s={url:e,dropZone:$(t)};t.setAttribute("accept","image/*"),$(t).fileupload(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},o,{},s,{},n,{},a))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(16),r=n.n(i);window.$=r.a,window.jQuery=r.a},function(t,e,n){"use strict";var i=n(57),r=n.n(i);window.Rails=r.a,r.a.start()},function(t,e,n){"use strict";var i=n(91);n.n(i).a.start()},function(t,e,n){"use strict";var i=n(92),r=n.n(i);window.autosize=r.a},,function(t,e){$.fn.extend({dismissible:function(){return this.each((function(){return $(this).on("shown.bs.popover",(function(t){return $("body").on("click.bs.popover",{source:$(this)},(function(t){var e,n,i,r;if(r=$(t.target),i=$(t.data.source),0===r.closest(i).length&&0===r.closest(".popover.in").length)return null!=(e=i.popover("hide").data("bs.popover"))&&null!=(n=e.inState)&&(n.click=!1),$("body").off("click.bs.popover")}))}))}))}})},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(132),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(46))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,a,s,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,i=function(t){var e=f.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),i=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,i(u),u++},h.clearImmediate=d}function d(t){delete c[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(46),n(88))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"use strict";"object"===e(t)&&t.exports?i(n(44)):i(window.loadImage)}((function(t){"use strict";var e=t.transform;t.transform=function(n,i,r,o,a){e.call(t,t.scale(n,i,a),i,r,o,a)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var n,i,r,o,a=e.aspectRatio;if(!a)return e;for(i in n={},e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n.crop=!0,(r=t.naturalWidth||t.width)/(o=t.naturalHeight||t.height)>a?(n.maxWidth=o*a,n.maxHeight=o):(n.maxWidth=r,n.maxHeight=r/a),n},t.renderImageToCanvas=function(t,e,n,i,r,o,a,s,u,c){return t.getContext("2d").drawImage(e,n,i,r,o,a,s,u,c),t},t.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,n,i){n=n||{};var r,o,a,s,u,c,l,f,h,d,p,m=document.createElement("canvas"),g=e.getContext||t.hasCanvasOption(n)&&m.getContext,v=e.naturalWidth||e.width,y=e.naturalHeight||e.height,b=v,_=y;function w(){var t=Math.max((a||b)/b,(s||_)/_);t>1&&(b*=t,_*=t)}function x(){var t=Math.min((r||b)/b,(o||_)/_);t<1&&(b*=t,_*=t)}if(g&&(l=(n=t.getTransformedOptions(e,n,i)).left||0,f=n.top||0,n.sourceWidth?(u=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(l=v-u-n.right)):u=v-l-(n.right||0),n.sourceHeight?(c=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(f=y-c-n.bottom)):c=y-f-(n.bottom||0),b=u,_=c),r=n.maxWidth,o=n.maxHeight,a=n.minWidth,s=n.minHeight,g&&r&&o&&n.crop?(b=r,_=o,(p=u/c-r/o)<0?(c=o*u/r,void 0===n.top&&void 0===n.bottom&&(f=(y-c)/2)):p>0&&(u=r*c/o,void 0===n.left&&void 0===n.right&&(l=(v-u)/2))):((n.contain||n.cover)&&(a=r=r||a,s=o=o||s),n.cover?(x(),w()):(w(),x())),g){if((h=n.pixelRatio)>1&&(m.style.width=b+"px",m.style.height=_+"px",b*=h,_*=h,m.getContext("2d").scale(h,h)),(d=n.downsamplingRatio)>0&&d<1&&b<u&&_<c)for(;u*d>b;)m.width=u*d,m.height=c*d,t.renderImageToCanvas(m,e,l,f,u,c,0,0,m.width,m.height),l=0,f=0,u=m.width,c=m.height,(e=document.createElement("canvas")).width=u,e.height=c,t.renderImageToCanvas(e,m,0,0,u,c,0,0,u,c);return m.width=b,m.height=_,t.transformCoordinates(m,n),t.renderImageToCanvas(m,e,l,f,u,c,0,0,b,_)}return e.width=b,e.height=_,e}}))}).call(this,n(15)(t))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"use strict";"object"===e(t)&&t.exports?i(n(44),n(72)):i(window.loadImage)}((function(t){"use strict";t.ExifMap=function(){return this},t.ExifMap.prototype.map={Orientation:274},t.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},t.getExifThumbnail=function(t,e,n){var i,r,o;if(n&&!(e+n>t.byteLength)){for(i=[],r=0;r<n;r+=1)o=t.getUint8(e+r),i.push((o<16?"0":"")+o.toString(16));return"data:image/jpeg,%"+i.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},t.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}},t.exifTagTypes[7]=t.exifTagTypes[1],t.getExifValue=function(e,n,i,r,o,a){var s,u,c,l,f,h,d=t.exifTagTypes[r];if(d){if(!((u=(s=d.size*o)>4?n+e.getUint32(i+8,a):i+8)+s>e.byteLength)){if(1===o)return d.getValue(e,u,a);for(c=[],l=0;l<o;l+=1)c[l]=d.getValue(e,u+l*d.size,a);if(d.ascii){for(f="",l=0;l<c.length&&"\0"!==(h=c[l]);l+=1)f+=h;return f}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},t.parseExifTag=function(e,n,i,r,o){var a=e.getUint16(i,r);o.exif[a]=t.getExifValue(e,n,i,e.getUint16(i+2,r),e.getUint32(i+4,r),r)},t.parseExifTags=function(t,e,n,i,r){var o,a,s;if(n+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((a=n+2+12*(o=t.getUint16(n,i)))+4>t.byteLength)){for(s=0;s<o;s+=1)this.parseExifTag(t,e,n+2+12*s,i,r);return t.getUint32(a,i)}console.log("Invalid Exif data: Invalid directory size.")}},t.parseExifData=function(e,n,i,r,o){if(!o.disableExif){var a,s,u,c=n+10;if(1165519206===e.getUint32(n+4))if(c+8>e.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===e.getUint16(n+8)){switch(e.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===e.getUint16(c+2,a)?(s=e.getUint32(c+4,a),r.exif=new t.ExifMap,(s=t.parseExifTags(e,c,c+s,a,r))&&!o.disableExifThumbnail&&(u={exif:{}},s=t.parseExifTags(e,c,c+s,a,u),u.exif[513]&&(r.exif.Thumbnail=t.getExifThumbnail(e,c+u.exif[513],u.exif[514]))),r.exif[34665]&&!o.disableExifSub&&t.parseExifTags(e,c,c+r.exif[34665],a,r),r.exif[34853]&&!o.disableExifGps&&t.parseExifTags(e,c,c+r.exif[34853],a,r)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData)}))}).call(this,n(15)(t))},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";"object"===i(e)?t(n(16),n(397)):t(window.jQuery)}((function(t){"use strict";var e=t.blueimp.fileupload.prototype.options.add;t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{processQueue:[],add:function(n,i){var r=t(this);i.process((function(){return r.fileupload("process",i)})),e.call(this,n,i)}},processActions:{},_processFile:function(e,n){var i=this,r=t.Deferred().resolveWith(i,[e]).promise();return this._trigger("process",null,e),t.each(e.processQueue,(function(e,o){var a=function(e){return n.errorThrown?t.Deferred().rejectWith(i,[n]).promise():i.processActions[o.action].call(i,e,o)};r=r.then(a,o.always&&a)})),r.done((function(){i._trigger("processdone",null,e),i._trigger("processalways",null,e)})).fail((function(){i._trigger("processfail",null,e),i._trigger("processalways",null,e)})),r},_transformProcessQueue:function(e){var n=[];t.each(e.processQueue,(function(){var i={},r=this.action,o=!0===this.prefix?r:this.prefix;t.each(this,(function(n,r){"string"===t.type(r)&&"@"===r.charAt(0)?i[n]=e[r.slice(1)||(o?o+n.charAt(0).toUpperCase()+n.slice(1):n)]:i[n]=r})),n.push(i)})),e.processQueue=n},processing:function(){return this._processing},process:function(e){var n=this,i=t.extend({},this.options,e);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),t.each(e.files,(function(r){var o=r?t.extend({},i):i,a=function(){return e.errorThrown?t.Deferred().rejectWith(n,[e]).promise():n._processFile(o,e)};o.index=r,n._processing+=1,n._processingQueue=n._processingQueue.then(a,a).always((function(){n._processing-=1,0===n._processing&&n._trigger("processstop")}))}))),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=t.Deferred().resolveWith(this).promise()}})}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,i;n=this,i=function(){"use strict";var t,e,n=["webkit","Moz","ms","O"],i={};function r(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function o(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t}function a(n,r,o,a){var s=["opacity",r,~~(100*n),o,a].join("-"),u=.01+o/a*100,c=Math.max(1-(1-n)/r*(100-u),n),l=t.substring(0,t.indexOf("Animation")).toLowerCase(),f=l&&"-"+l+"-"||"";return i[s]||(e.insertRule("@"+f+"keyframes "+s+"{0%{opacity:"+c+"}"+u+"%{opacity:"+n+"}"+(u+.01)+"%{opacity:1}"+(u+r)%100+"%{opacity:"+n+"}100%{opacity:"+c+"}}",e.cssRules.length),i[s]=1),s}function s(t,e){var i,r,o=t.style;if(void 0!==o[e=e.charAt(0).toUpperCase()+e.slice(1)])return e;for(r=0;r<n.length;r++)if(void 0!==o[i=n[r]+e])return i}function u(t,e){for(var n in e)t.style[s(t,n)||n]=e[n];return t}function c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function l(t,e){return"string"==typeof t?t:t[e%t.length]}var f,h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};function d(t){this.opts=c(t||{},d.defaults,h)}if(d.defaults={},c(d.prototype,{spin:function(e){this.stop();var n=this,i=n.opts,o=n.el=r(null,{className:i.className});if(u(o,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),e&&e.insertBefore(o,e.firstChild||null),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!t){var a,s=0,c=(i.lines-1)*(1-i.direction)/2,l=i.fps,f=l/i.speed,h=(1-i.opacity)/(f*i.trail/100),d=f/i.lines;!function t(){s++;for(var e=0;e<i.lines;e++)a=Math.max(1-(s+(i.lines-e)*d)%f*h,i.opacity),n.opacity(o,e*i.direction+c,a,i);n.timeout=n.el&&setTimeout(t,~~(1e3/l))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(e,n){var i,s=0,c=(n.lines-1)*(1-n.direction)/2;function f(t,e){return u(r(),{position:"absolute",width:n.scale*(n.length+n.width)+"px",height:n.scale*n.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*s+n.rotate)+"deg) translate("+n.scale*n.radius+"px,0)",borderRadius:(n.corners*n.scale*n.width>>1)+"px"})}for(;s<n.lines;s++)i=u(r(),{position:"absolute",top:1+~(n.scale*n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:t&&a(n.opacity,n.trail,c+s*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&o(i,u(f("#000","0 0 4px #000"),{top:"2px"})),o(e,o(i,f(l(n.color,s),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}}),"undefined"!=typeof document){f=r("style",{type:"text/css"}),o(document.getElementsByTagName("head")[0],f),e=f.sheet||f.styleSheet;var p=u(r("group"),{behavior:"url(#default#VML)"});!s(p,"transform")&&p.adj?function(){function t(t,e){return r("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}e.addRule(".spin-vml","behavior:url(#default#VML)"),d.prototype.lines=function(e,n){var i=n.scale*(n.length+n.width),r=2*n.scale*i;function a(){return u(t("group",{coordsize:r+" "+r,coordorigin:-i+" "+-i}),{width:r,height:r})}var s,c=-(n.width+n.length)*n.scale*2+"px",f=u(a(),{position:"absolute",top:c,left:c});function h(e,r,s){o(f,o(u(a(),{rotation:360/n.lines*e+"deg",left:~~r}),o(u(t("roundrect",{arcsize:n.corners}),{width:i,height:n.scale*n.width,left:n.scale*n.radius,top:-n.scale*n.width>>1,filter:s}),t("fill",{color:l(n.color,e),opacity:n.opacity}),t("stroke",{opacity:0}))))}if(n.shadow)for(s=1;s<=n.lines;s++)h(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=n.lines;s++)h(s);return o(e,f)},d.prototype.opacity=function(t,e,n,i){var r=t.firstChild;i=i.shadow&&i.lines||0,r&&e+i<r.childNodes.length&&(r=(r=(r=r.childNodes[e+i])&&r.firstChild)&&r.firstChild)&&(r.opacity=n)}}():t=s(p,"animation")}return d},"object"==e(t)&&t.exports?t.exports=i():n.Spinner=i()}).call(this,n(15)(t))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){"use strict";var i=n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype,r=n.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),o=r&&n.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),a=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(r||a)&&n.atob&&n.ArrayBuffer&&n.Uint8Array&&function(t){var e,n,i,u,c,l,f,h,d;if(!(e=t.match(s)))throw new Error("invalid data URI");for(n=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),i=!!e[4],u=t.slice(e[0].length),c=i?atob(u):decodeURIComponent(u),l=new ArrayBuffer(c.length),f=new Uint8Array(l),h=0;h<c.length;h+=1)f[h]=c.charCodeAt(h);return r?new Blob([o?f:l],{type:n}):((d=new a).append(l),d.getBlob(n))};n.HTMLCanvasElement&&!i.toBlob&&(i.mozGetAsFile?i.toBlob=function(t,e,n){n&&i.toDataURL&&u?t(u(this.toDataURL(e,n))):t(this.mozGetAsFile("blob",e))}:i.toDataURL&&u&&(i.toBlob=function(t,e,n){t(u(this.toDataURL(e,n)))})),"object"===e(t)&&t.exports?t.exports=u:n.dataURLtoBlob=u}(window)}).call(this,n(15)(t))},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";"object"===i(e)?t(n(16),n(526)):t(window.jQuery)}((function(t){"use strict";function e(e){var n="dragover"===e;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var r=i.dataTransfer;r&&-1!==t.inArray("Files",r.types)&&!1!==this._trigger(e,t.Event(e,{delegatedEvent:i}))&&(i.preventDefault(),n&&(r.dropEffect="copy"))}}t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file"/>').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,uniqueFilenames:void 0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,n){return e=this.messages[e]||e.toString(),n&&t.each(n,(function(t,n){e=e.replace("{"+t+"}",n)})),e},formData:function(t){return t.serializeArray()},add:function(e,n){if(e.isDefaultPrevented())return!1;(n.autoUpload||!1!==n.autoUpload&&t(this).fileupload("option","autoUpload"))&&n.process().done((function(){n.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var i=t-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(e-this.loaded)*(1e3/i)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(n=[],t.each(e.formData,(function(t,e){n.push({name:t,value:e})})),n):[]},_getTotal:function(e){var n=0;return t.each(e,(function(t,e){n+=e.size||1})),n},_initProgressObject:function(e){var n={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,n):e._progress=n},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,n){if(e.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&e.loaded!==e.total)return;n._time=r,i=Math.floor(e.loaded/e.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),n),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var n=this,i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",(function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable,t.loaded=i.loaded,t.total=i.total,n._onProgress(t,e)})),e.xhr=function(){return i})},_deinitProgressListener:function(e){var n=e.xhr?e.xhr():t.ajaxSettings.xhr();n.upload&&t(n.upload).unbind("progress")},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_getUniqueFilename:function(t,e){return e[t=String(t)]?(t=t.replace(/(?: \(([\d]+)\))?(\.[^.]+)?$/,(function(t,e,n){return" ("+(e?Number(e)+1:1)+")"+(n||"")})),this._getUniqueFilename(t,e)):(e[t]=!0,t)},_initXHRData:function(e){var n,i=this,r=e.files[0],o=e.multipart||!t.support.xhrFileUpload,a="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),o&&!e.blob&&this._isInstanceOf("File",r)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.uploadName||r.name)+'"'),o?t.support.xhrFormDataFileUpload&&(e.postMessage?(n=this._getFormData(e),e.blob?n.push({name:a,value:e.blob}):t.each(e.files,(function(i,r){n.push({name:"array"===t.type(e.paramName)&&e.paramName[i]||a,value:r})}))):(i._isInstanceOf("FormData",e.formData)?n=e.formData:(n=new FormData,t.each(this._getFormData(e),(function(t,e){n.append(e.name,e.value)}))),e.blob?n.append(a,e.blob,r.uploadName||r.name):t.each(e.files,(function(r,o){if(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o)){var s=o.uploadName||o.name;e.uniqueFilenames&&(s=i._getUniqueFilename(s,e.uniqueFilenames)),n.append("array"===t.type(e.paramName)&&e.paramName[r]||a,o,s)}}))),e.data=n):(e.contentType=r.type||"application/octet-stream",e.data=e.blob||r),e.blob=null},_initIframeSettings:function(e){var n=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&n&&n!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var n=t(e.fileInput),i=e.paramName;return i?t.isArray(i)||(i=[i]):(i=[],n.each((function(){for(var e=t(this),n=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)i.push(n),r-=1})),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,i){var r=t.Deferred(),o=r.promise();return n=n||this.options.context||o,!0===e?r.resolveWith(n,i):!1===e&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(e,n){var i=this,r=function(e){return t.Deferred().resolveWith(i,e).promise()};n.process=function(e,o){return(e||o)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).then((function(){return n.errorThrown?t.Deferred().rejectWith(i,[n]).promise():r(arguments)})).then(e,o)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=!1!==i._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)&&i._onSend(e,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(e,n){e.uploadedBytes=e.uploadedBytes||0;var i,r,o=this,a=e.files[0],s=a.size,u=e.uploadedBytes,c=e.maxChunkSize||s,l=this._blobSlice,f=t.Deferred(),h=f.promise();return!(!(this._isXHRUpload(e)&&l&&(u||("function"===t.type(c)?c(e):c)<s))||e.data)&&(!!n||(u>=s?(a.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",a.error])):(r=function(){var n=t.extend({},e),h=n._progress.loaded;n.blob=l.call(a,u,u+("function"===t.type(c)?c(n):c),a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+u+"-"+(u+n.chunkSize-1)+"/"+s,o._trigger("chunkbeforesend",null,n),o._initXHRData(n),o._initProgressListener(n),i=(!1!==o._trigger("chunksend",null,n)&&t.ajax(n)||o._getXHRPromise(!1,n.context)).done((function(i,a,c){u=o._getUploadedBytes(c)||u+n.chunkSize,h+n.chunkSize-n._progress.loaded&&o._onProgress(t.Event("progress",{lengthComputable:!0,loaded:u-n.uploadedBytes,total:u-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=u,n.result=i,n.textStatus=a,n.jqXHR=c,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),u<s?r():f.resolveWith(n.context,[i,a,c])})).fail((function(t,e,i){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),f.rejectWith(n.context,[t,e,i])})).always((function(){o._deinitProgressListener(n)}))},this._enhancePromise(h),h.abort=function(){return i.abort()},r(),h)))},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=e,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(t,e,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=t,r.textStatus=i.textStatus=e,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(t,e,n,i){this._trigger("always",null,i)},_onSend:function(e,n){n.submit||this._addConvenienceMethods(e,n);var i,r,o,a,s=this,u=s._getAJAXSettings(n),c=function(){return s._sending+=1,u._bitrateTimer=new s._BitrateTimer,i=i||((r||!1===s._trigger("send",t.Event("send",{delegatedEvent:e}),u))&&s._getXHRPromise(!1,u.context,r)||s._chunkedUpload(u)||t.ajax(u)).done((function(t,e,n){s._onDone(t,e,n,u)})).fail((function(t,e,n){s._onFail(t,e,n,u)})).always((function(t,e,n){if(s._deinitProgressListener(u),s._onAlways(t,e,n,u),s._sending-=1,s._active-=1,u.limitConcurrentUploads&&u.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")}))};return this._beforeSend(e,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=t.Deferred(),this._slots.push(o),a=o.then(c)):(this._sequence=this._sequence.then(c,c),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(u.context,r),c())},this._enhancePromise(a)):c()},_onAdd:function(e,n){var i,r,o,a,s=this,u=!0,c=t.extend({},this.options,n),l=n.files,f=l.length,h=c.limitMultiFileUploads,d=c.limitMultiFileUploadSize,p=c.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(c),v=0;if(!f)return!1;if(d&&void 0===l[0].size&&(d=void 0),(c.singleFileUploads||h||d)&&this._isXHRUpload(c))if(c.singleFileUploads||d||!h)if(!c.singleFileUploads&&d)for(o=[],i=[],a=0;a<f;a+=1)m+=l[a].size+p,(a+1===f||m+l[a+1].size+p>d||h&&a+1-v>=h)&&(o.push(l.slice(v,a+1)),(r=g.slice(v,a+1)).length||(r=g),i.push(r),v=a+1,m=0);else i=g;else for(o=[],i=[],a=0;a<f;a+=h)o.push(l.slice(a,a+h)),(r=g.slice(a,a+h)).length||(r=g),i.push(r);else o=[l],i=[g];return n.originalFiles=l,t.each(o||l,(function(r,a){var c=t.extend({},n);return c.files=o?a:[a],c.paramName=i[r],s._initResponseObject(c),s._initProgressObject(c),s._addConvenienceMethods(e,c),u=s._trigger("add",t.Event("add",{delegatedEvent:e}),c)})),u},_replaceFileInput:function(e){var n=e.fileInput,i=n.clone(!0),r=n.is(document.activeElement);e.fileInputClone=i,t("<form></form>").append(i)[0].reset(),n.after(i).detach(),r&&i.focus(),t.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map((function(t,e){return e===n[0]?i[0]:e})),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(e,n){var i,r=this,o=t.Deferred(),a=[],s=function(t){t&&!t.entry&&(t.entry=e),o.resolve([t])};return n=n||"",e.isFile?e._file?(e._file.relativePath=n,o.resolve(e._file)):e.file((function(t){t.relativePath=n,o.resolve(t)}),s):e.isDirectory?(i=e.createReader(),function t(){i.readEntries((function(i){i.length?(a=a.concat(i),t()):function(t){r._handleFileTreeEntries(t,n+e.name+"/").done((function(t){o.resolve(t)})).fail(s)}(a)}),s)}()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(e,n){var i=this;return t.when.apply(t,t.map(e,(function(t){return i._handleFileTreeEntry(t,n)}))).then((function(){return Array.prototype.concat.apply([],arguments)}))},_getDroppedFiles:function(e){var n=(e=e||{}).items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,(function(t){var e;return t.webkitGetAsEntry?((e=t.webkitGetAsEntry())&&(e._file=t.getAsFile()),e):t.getAsEntry()}))):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){var n,i,r=(e=t(e)).prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if((n=t.makeArray(e.prop("files"))).length)void 0===n[0].name&&n[0].fileName&&t.each(n,(function(t,e){e.name=e.fileName,e.size=e.fileSize}));else{if(!(i=e.prop("value")))return t.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).then((function(){return Array.prototype.concat.apply([],arguments)})):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,i={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(i.fileInput).always((function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i),!1!==n._trigger("change",t.Event("change",{delegatedEvent:e}),i)&&n._onAdd(e,i)}))},_onPaste:function(e){var n=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(t.each(n,(function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.files.push(n)})),!1!==this._trigger("paste",t.Event("paste",{delegatedEvent:e}),i)&&this._onAdd(e,i))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var n=this,i=e.dataTransfer,r={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always((function(i){r.files=i,!1!==n._trigger("drop",t.Event("drop",{delegatedEvent:e}),r)&&n._onAdd(e,r)})))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(e,n){var i=-1!==t.inArray(e,this._specialOptions);i&&this._destroyEventHandlers(),this._super(e,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),n=e.pop();return e.shift(),new RegExp(e.join("/"),n)},_isRegExpOption:function(e,n){return"url"!==e&&"string"===t.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var e=this,n=this.options,i=this.element.data();t.each(this.element[0].attributes,(function(t,r){var o,a=r.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,(function(t){return t.charAt(1).toUpperCase()})),o=i[a],e._isRegExpOption(a,o)&&(o=e._getRegExp(o)),n[a]=o)}))},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always((function(t){e.files=t,n._onAdd(null,e)})):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,i,r=this,o=t.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(e.fileInput).always((function(t){i||(t.length?(e.files=t,(n=r._onSend(null,e)).then((function(t,e,n){o.resolve(t,e,n)}),(function(t,e,n){o.reject(t,e,n)}))):o.reject())})),this._enhancePromise(a)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}))},,,function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * Colcade v0.2.0
 * Lightweight masonry layout
 * by David DeSandro
 * MIT license
 */
!function(n,i){"object"==e(t)&&t.exports?t.exports=i():n.Colcade=i()}(window,(function(){function t(t,e){if((t=s(t))&&t.colcadeGUID){var n=i[t.colcadeGUID];return n.option(e),n}this.element=t,this.options={},this.option(e),this.create()}var e=t.prototype;e.option=function(t){this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(this.options,t)};var n=0,i={};function r(e){var n=e.getAttribute("data-colcade").split(","),i={};n.forEach((function(t){var e=t.split(":"),n=e[0].trim(),r=e[1].trim();i[n]=r})),new t(e,i)}function o(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}function a(t,e){return o((e=e||document).querySelectorAll(t))}function s(t){return"string"==typeof t&&(t=document.querySelector(t)),t}return e.create=function(){this.errorCheck();var t=this.guid=++n;this.element.colcadeGUID=t,i[t]=this,this.reload(),this._windowResizeHandler=this.onWindowResize.bind(this),this._loadHandler=this.onLoad.bind(this),window.addEventListener("resize",this._windowResizeHandler),this.element.addEventListener("load",this._loadHandler,!0)},e.errorCheck=function(){var t=[];if(this.element||t.push("Bad element: "+this.element),this.options.columns||t.push("columns option required: "+this.options.columns),this.options.items||t.push("items option required: "+this.options.items),t.length)throw new Error("[Colcade error] "+t.join(". "))},e.reload=function(){this.updateColumns(),this.updateItems(),this.layout()},e.updateColumns=function(){this.columns=a(this.options.columns,this.element)},e.updateItems=function(){this.items=a(this.options.items,this.element)},e.getActiveColumns=function(){return this.columns.filter((function(t){return"none"!=getComputedStyle(t).display}))},e.layout=function(){this.activeColumns=this.getActiveColumns(),this._layout()},e._layout=function(){this.columnHeights=this.activeColumns.map((function(){return 0})),this.layoutItems(this.items)},e.layoutItems=function(t){t.forEach(this.layoutItem,this)},e.layoutItem=function(t){var e=Math.min.apply(Math,this.columnHeights),n=this.columnHeights.indexOf(e);this.activeColumns[n].appendChild(t),this.columnHeights[n]+=t.offsetHeight||1},e.append=function(t){var e=this.getQueryItems(t);this.items=this.items.concat(e),this.layoutItems(e)},e.prepend=function(t){var e=this.getQueryItems(t);this.items=e.concat(this.items),this._layout()},e.getQueryItems=function(t){t=o(t);var e=document.createDocumentFragment();return t.forEach((function(t){e.appendChild(t)})),a(this.options.items,e)},e.measureColumnHeight=function(t){var e=this.element.getBoundingClientRect();this.activeColumns.forEach((function(n,i){if(!t||n.contains(t)){var r=n.lastElementChild.getBoundingClientRect();this.columnHeights[i]=r.bottom-e.top}}),this)},e.onWindowResize=function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.onDebouncedResize()}.bind(this),100)},e.onDebouncedResize=function(){var t=this.getActiveColumns(),e=t.length==this.activeColumns.length,n=!0;this.activeColumns.forEach((function(e,i){n=n&&e==t[i]})),e&&n||(this.activeColumns=t,this._layout())},e.onLoad=function(t){this.measureColumnHeight(t.target)},e.destroy=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.items.forEach((function(t){this.element.appendChild(t)}),this),window.removeEventListener("resize",this._windowResizeHandler),this.element.removeEventListener("load",this._loadHandler,!0),delete this.element.colcadeGUID,delete i[this.guid]},function(t){if("complete"==document.readyState)return void t();document.addEventListener("DOMContentLoaded",t)}((function(){a("[data-colcade]").forEach(r)})),t.data=function(t){var e=(t=s(t))&&t.colcadeGUID;return e&&i[e]},t.makeJQueryPlugin=function(e){function n(t,n,i){var r;return t.each((function(t,o){var a=e.data(o,"colcade");if(a){var s=a[n].apply(a,i);r=void 0===r?s:r}})),void 0!==r?r:t}function i(n,i){n.each((function(n,r){var o=e.data(r,"colcade");o?(o.option(i),o.layout()):(o=new t(r,i),e.data(r,"colcade",o))}))}(e=e||window.jQuery)&&(e.fn.colcade=function(t){if("string"==typeof t){var e=Array.prototype.slice.call(arguments,1);return n(this,t,e)}return i(this,t),this})},t.makeJQueryPlugin(),t}))}).call(this,n(15)(t))},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * headroom.js v0.9.4 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2017 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */
!function(n,r){"use strict";"object"===i(e)?t.exports=r():n.Headroom=r()}(this,(function(){"use strict";var t={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};function e(t){this.callback=t,this.ticking=!1}function n(t,e){var r;e=function t(e){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var n,r,o,a=e||{};for(r=1;r<arguments.length;r++){var s=arguments[r]||{};for(n in s)"object"===i(a[n])&&(!(o=a[n])||"undefined"==typeof window||o!==window&&!o.nodeType)?a[n]=t(a[n],s[n]):a[n]=a[n]||s[n]}return a}(e,n.options),this.lastKnownScrollY=0,this.elem=t,this.tolerance=(r=e.tolerance)===Object(r)?r:{down:r,up:r},this.classes=e.classes,this.offset=e.offset,this.scroller=e.scroller,this.initialised=!1,this.onPin=e.onPin,this.onUnpin=e.onUnpin,this.onTop=e.onTop,this.onNotTop=e.onNotTop,this.onBottom=e.onBottom,this.onNotBottom=e.onNotBottom}return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,e.prototype={constructor:e,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},n.prototype={constructor:n,init:function(){if(n.cutsTheMustard)return this.debouncer=new e(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var t=this.classes;for(var e in this.initialised=!1,t)t.hasOwnProperty(e)&&this.elem.classList.remove(t[e]);this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var t=this.elem.classList,e=this.classes;!t.contains(e.pinned)&&t.contains(e.unpinned)||(t.add(e.unpinned),t.remove(e.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var t=this.elem.classList,e=this.classes;t.contains(e.unpinned)&&(t.remove(e.unpinned),t.add(e.pinned),this.onPin&&this.onPin.call(this))},top:function(){var t=this.elem.classList,e=this.classes;t.contains(e.top)||(t.add(e.top),t.remove(e.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notTop)||(t.add(e.notTop),t.remove(e.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.bottom)||(t.add(e.bottom),t.remove(e.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notBottom)||(t.add(e.notBottom),t.remove(e.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(t){return Math.max(t.offsetHeight,t.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)},getElementHeight:function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(t){var e=t<0,n=t+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return e||n},toleranceExceeded:function(t,e){return Math.abs(t-this.lastKnownScrollY)>=this.tolerance[e]},shouldUnpin:function(t,e){var n=t>this.lastKnownScrollY,i=t>=this.offset;return n&&i&&e},shouldPin:function(t,e){var n=t<this.lastKnownScrollY,i=t<=this.offset;return n&&e||i},update:function(){var t=this.getScrollY(),e=t>this.lastKnownScrollY?"down":"up",n=this.toleranceExceeded(t,e);this.isOutOfBounds(t)||(t<=this.offset?this.top():this.notTop(),t+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(t,n)?this.unpin():this.shouldPin(t,n)&&this.pin(),this.lastKnownScrollY=t)}},n.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},n.cutsTheMustard=void 0!==t&&t.rAF&&t.bind&&t.classList,n}))},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,o;function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function s(t){return(s="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}r=this,o=function(){"use strict";var t="undefined"!=typeof window,e=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=t&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype,i=t&&"classList"in document.createElement("p"),r={elements_selector:"img",container:e||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},o=function(t,e){var n,i=new t(e);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:i}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:i})}window.dispatchEvent(n)},s=function(t,e){return t.getAttribute("data-"+e)},u=function(t,e,n){var i="data-"+e;null!==n?t.setAttribute(i,n):t.removeAttribute(i)},c=function(t){return"true"===s(t,"was-processed")},l=function(t,e){return u(t,"ll-timeout",e)},f=function(t){return s(t,"ll-timeout")},h=function(t,e){t&&t(e)},d=function(t,e){t._loadingCount+=e,0===t._elements.length&&0===t._loadingCount&&h(t._settings.callback_finish)},p=function(t){for(var e,n=[],i=0;e=t.children[i];i+=1)"SOURCE"===e.tagName&&n.push(e);return n},m=function(t,e,n){n&&t.setAttribute(e,n)},g=function(t,e){m(t,"sizes",s(t,e.data_sizes)),m(t,"srcset",s(t,e.data_srcset)),m(t,"src",s(t,e.data_src))},v={IMG:function(t,e){var n=t.parentNode;n&&"PICTURE"===n.tagName&&p(n).forEach((function(t){g(t,e)})),g(t,e)},IFRAME:function(t,e){m(t,"src",s(t,e.data_src))},VIDEO:function(t,e){p(t).forEach((function(t){m(t,"src",s(t,e.data_src))})),m(t,"src",s(t,e.data_src)),t.load()}},y=function(t,e){var n,i,r=e._settings,o=t.tagName,a=v[o];if(a)return a(t,r),d(e,1),void(e._elements=(n=e._elements,i=t,n.filter((function(t){return t!==i}))));!function(t,e){var n=s(t,e.data_src),i=s(t,e.data_bg);n&&(t.style.backgroundImage='url("'.concat(n,'")')),i&&(t.style.backgroundImage=i)}(t,r)},b=function(t,e){i?t.classList.add(e):t.className+=(t.className?" ":"")+e},_=function(t,e,n){t.addEventListener(e,n)},w=function(t,e,n){t.removeEventListener(e,n)},x=function(t,e,n){w(t,"load",e),w(t,"loadeddata",e),w(t,"error",n)},S=function(t,e,n){var r=n._settings,o=e?r.class_loaded:r.class_error,a=e?r.callback_loaded:r.callback_error,s=t.target;!function(t,e){i?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}(s,r.class_loading),b(s,o),h(a,s),d(n,-1)},T=function(t,e){var n=function n(r){S(r,!0,e),x(t,n,i)},i=function i(r){S(r,!1,e),x(t,n,i)};!function(t,e,n){_(t,"load",e),_(t,"loadeddata",e),_(t,"error",n)}(t,n,i)},O=["IMG","IFRAME","VIDEO"],C=function(t,e){var n=e._observer;j(t,e),n&&e._settings.auto_unobserve&&n.unobserve(t)},k=function(t){var e=f(t);e&&(clearTimeout(e),l(t,null))},E=function(t,e){var n=e._settings.load_delay,i=f(t);i||(i=setTimeout((function(){C(t,e),k(t)}),n),l(t,i))},j=function(t,e,n){var i=e._settings;!n&&c(t)||(O.indexOf(t.tagName)>-1&&(T(t,e),b(t,i.class_loading)),y(t,e),function(t){u(t,"was-processed","true")}(t),h(i.callback_reveal,t),h(i.callback_set,t))},P=function(t){return!!n&&(t._observer=new IntersectionObserver((function(e){e.forEach((function(e){return function(t){return t.isIntersecting||t.intersectionRatio>0}(e)?function(t,e){var n=e._settings;h(n.callback_enter,t),n.load_delay?E(t,e):C(t,e)}(e.target,t):function(t,e){var n=e._settings;h(n.callback_exit,t),n.load_delay&&k(t)}(e.target,t)}))}),{root:(e=t._settings).container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),!0);var e},I=["IMG","IFRAME"],L=function(t,e){return function(t){return t.filter((function(t){return!c(t)}))}((n=t||function(t){return t.container.querySelectorAll(t.elements_selector)}(e),Array.prototype.slice.call(n)));var n},R=function(t,e){this._settings=function(t){return a({},r,t)}(t),this._loadingCount=0,P(this),this.update(e)};return R.prototype={update:function(t){var n,i=this,r=this._settings;this._elements=L(t,r),!e&&this._observer?(function(t){return t.use_native&&"loading"in HTMLImageElement.prototype}(r)&&((n=this)._elements.forEach((function(t){-1!==I.indexOf(t.tagName)&&(t.setAttribute("loading","lazy"),j(t,n))})),this._elements=L(t,r)),this._elements.forEach((function(t){i._observer.observe(t)}))):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach((function(e){t._observer.unobserve(e)})),this._observer=null),this._elements=null,this._settings=null},load:function(t,e){j(t,this,e)},loadAll:function(){var t=this;this._elements.forEach((function(e){C(e,t)}))}},t&&function(t,e){if(e)if(e.length)for(var n,i=0;n=e[i];i+=1)o(t,n);else o(t,e)}(R,window.lazyLoadOptions),R},"object"===s(e)&&void 0!==t?t.exports=o():r.LazyLoad=o()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){if("object"==i(e))t(n(16),n(395));else{if(!window.Spinner)throw new Error("Spin.js not present");t(window.jQuery,window.Spinner)}}((function(t,e){t.fn.spin=function(n,i){return this.each((function(){var r=t(this),o=r.data();o.spinner&&(o.spinner.stop(),delete o.spinner),!1!==n&&(n=t.extend({color:i||r.css("color")},t.fn.spin.presets[n]||n),o.spinner=new e(n).spin(this))}))},t.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}))},function(t,e){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r})},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";"object"===i(e)?t(n(16)):t(jQuery)}((function(t){"use strict";var e={escapeRegExChars:function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(t){var e=document.createElement("div");return e.className=t,e.style.position="absolute",e.style.display="none",e}},n=27,i=9,r=13,o=38,a=39,s=40,u=t.noop;function c(e,n){this.element=e,this.el=t(e),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.timeoutId=null,this.cachedResponse={},this.onChangeTimeout=null,this.onChange=null,this.isLocal=!1,this.suggestionsContainer=null,this.noSuggestionsContainer=null,this.options=t.extend(!0,{},c.defaults,n),this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},this.hint=null,this.hintValue="",this.selection=null,this.initialize(),this.setOptions(n)}c.utils=e,t.Autocomplete=c,c.defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:function(t,n){if(!n)return t.value;var i="("+e.escapeRegExChars(n)+")";return t.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},formatGroup:function(t,e){return'<div class="autocomplete-group">'+e+"</div>"},delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:u,onSearchComplete:u,onSearchError:u,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(t,e,n){return-1!==t.value.toLowerCase().indexOf(n)},paramName:"query",transformResult:function(e){return"string"==typeof e?t.parseJSON(e):e},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1},c.prototype={initialize:function(){var e,n=this,i="."+n.classes.suggestion,r=n.classes.selected,o=n.options;n.element.setAttribute("autocomplete","off"),n.noSuggestionsContainer=t('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=c.utils.createNode(o.containerClass),(e=t(n.suggestionsContainer)).appendTo(o.appendTo||"body"),"auto"!==o.width&&e.css("width",o.width),e.on("mouseover.autocomplete",i,(function(){n.activate(t(this).data("index"))})),e.on("mouseout.autocomplete",(function(){n.selectedIndex=-1,e.children("."+r).removeClass(r)})),e.on("click.autocomplete",i,(function(){n.select(t(this).data("index"))})),e.on("click.autocomplete",(function(){clearTimeout(n.blurTimeoutId)})),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},t(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",(function(t){n.onKeyPress(t)})),n.el.on("keyup.autocomplete",(function(t){n.onKeyUp(t)})),n.el.on("blur.autocomplete",(function(){n.onBlur()})),n.el.on("focus.autocomplete",(function(){n.onFocus()})),n.el.on("change.autocomplete",(function(t){n.onKeyUp(t)})),n.el.on("input.autocomplete",(function(t){n.onKeyUp(t)}))},onFocus:function(){this.fixPosition(),this.el.val().length>=this.options.minChars&&this.onValueChange()},onBlur:function(){var e=this,n=e.options,i=e.el.val(),r=e.getQuery(i);e.blurTimeoutId=setTimeout((function(){e.hide(),e.selection&&e.currentValue!==r&&(n.onInvalidateSelection||t.noop).call(e.element)}),200)},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(e){var n=t.extend({},this.options,e);this.isLocal=Array.isArray(n.lookup),this.isLocal&&(n.lookup=this.verifySuggestionsFormat(n.lookup)),n.orientation=this.validateOrientation(n.orientation,"bottom"),t(this.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex}),this.options=n},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearTimeout(this.onChangeTimeout),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var e=t(this.suggestionsContainer),n=e.parent().get(0);if(n===document.body||this.options.forceFixPosition){var i=this.options.orientation,r=e.outerHeight(),o=this.el.outerHeight(),a=this.el.offset(),s={top:a.top,left:a.left};if("auto"===i){var u=t(window).height(),c=t(window).scrollTop(),l=-c+a.top-r,f=c+u-(a.top+o+r);i=Math.max(l,f)===l?"top":"bottom"}if(s.top+="top"===i?-r:o,n!==document.body){var h,d=e.css("opacity");this.visible||e.css("opacity",0).show(),h=e.offsetParent().offset(),s.top-=h.top,s.top+=n.scrollTop,s.left-=h.left,this.visible||e.css("opacity",d).hide()}"auto"===this.options.width&&(s.width=this.el.outerWidth()+"px"),e.css(s)}},isCursorAtEnd:function(){var t,e=this.el.val().length,n=this.element.selectionStart;return"number"==typeof n?n===e:!document.selection||((t=document.selection.createRange()).moveStart("character",-e),e===t.text.length)},onKeyPress:function(t){if(this.disabled||this.visible||t.which!==s||!this.currentValue){if(!this.disabled&&this.visible){switch(t.which){case n:this.el.val(this.currentValue),this.hide();break;case a:if(this.hint&&this.options.onHint&&this.isCursorAtEnd()){this.selectHint();break}return;case i:if(this.hint&&this.options.onHint)return void this.selectHint();if(-1===this.selectedIndex)return void this.hide();if(this.select(this.selectedIndex),!1===this.options.tabDisabled)return;break;case r:if(-1===this.selectedIndex)return void this.hide();this.select(this.selectedIndex);break;case o:this.moveUp();break;case s:this.moveDown();break;default:return}t.stopImmediatePropagation(),t.preventDefault()}}else this.suggest()},onKeyUp:function(t){var e=this;if(!e.disabled){switch(t.which){case o:case s:return}clearTimeout(e.onChangeTimeout),e.currentValue!==e.el.val()&&(e.findBestHint(),e.options.deferRequestBy>0?e.onChangeTimeout=setTimeout((function(){e.onValueChange()}),e.options.deferRequestBy):e.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange)this.ignoreValueChange=!1;else{var e=this.options,n=this.el.val(),i=this.getQuery(n);this.selection&&this.currentValue!==i&&(this.selection=null,(e.onInvalidateSelection||t.noop).call(this.element)),clearTimeout(this.onChangeTimeout),this.currentValue=n,this.selectedIndex=-1,e.triggerSelectOnValidInput&&this.isExactMatch(i)?this.select(0):i.length<e.minChars?this.hide():this.getSuggestions(i)}},isExactMatch:function(t){var e=this.suggestions;return 1===e.length&&e[0].value.toLowerCase()===t.toLowerCase()},getQuery:function(e){var n,i=this.options.delimiter;return i?(n=e.split(i),t.trim(n[n.length-1])):e},getSuggestionsLocal:function(e){var n,i=this.options,r=e.toLowerCase(),o=i.lookupFilter,a=parseInt(i.lookupLimit,10);return n={suggestions:t.grep(i.lookup,(function(t){return o(t,e,r)}))},a&&n.suggestions.length>a&&(n.suggestions=n.suggestions.slice(0,a)),n},getSuggestions:function(e){var n,i,r,o,a=this,s=a.options,u=s.serviceUrl;s.params[s.paramName]=e,!1!==s.onSearchStart.call(a.element,s.params)&&(i=s.ignoreParams?null:s.params,t.isFunction(s.lookup)?s.lookup(e,(function(t){a.suggestions=t.suggestions,a.suggest(),s.onSearchComplete.call(a.element,e,t.suggestions)})):(a.isLocal?n=a.getSuggestionsLocal(e):(t.isFunction(u)&&(u=u.call(a.element,e)),r=u+"?"+t.param(i||{}),n=a.cachedResponse[r]),n&&Array.isArray(n.suggestions)?(a.suggestions=n.suggestions,a.suggest(),s.onSearchComplete.call(a.element,e,n.suggestions)):a.isBadQuery(e)?s.onSearchComplete.call(a.element,e,[]):(a.abortAjax(),o={url:u,data:i,type:s.type,dataType:s.dataType},t.extend(o,s.ajaxSettings),a.currentRequest=t.ajax(o).done((function(t){var n;a.currentRequest=null,n=s.transformResult(t,e),a.processResponse(n,e,r),s.onSearchComplete.call(a.element,e,n.suggestions)})).fail((function(t,n,i){s.onSearchError.call(a.element,e,t,n,i)})))))},isBadQuery:function(t){if(!this.options.preventBadQueries)return!1;for(var e=this.badQueries,n=e.length;n--;)if(0===t.indexOf(e[n]))return!0;return!1},hide:function(){var e=t(this.suggestionsContainer);t.isFunction(this.options.onHide)&&this.visible&&this.options.onHide.call(this.element,e),this.visible=!1,this.selectedIndex=-1,clearTimeout(this.onChangeTimeout),t(this.suggestionsContainer).hide(),this.signalHint(null)},suggest:function(){if(this.suggestions.length){var e,n=this.options,i=n.groupBy,r=n.formatResult,o=this.getQuery(this.currentValue),a=this.classes.suggestion,s=this.classes.selected,u=t(this.suggestionsContainer),c=t(this.noSuggestionsContainer),l=n.beforeRender,f="";n.triggerSelectOnValidInput&&this.isExactMatch(o)?this.select(0):(t.each(this.suggestions,(function(t,s){i&&(f+=function(t,r){var o=t.data[i];return e===o?"":(e=o,n.formatGroup(t,e))}(s,0)),f+='<div class="'+a+'" data-index="'+t+'">'+r(s,o,t)+"</div>"})),this.adjustContainerWidth(),c.detach(),u.html(f),t.isFunction(l)&&l.call(this.element,u,this.suggestions),this.fixPosition(),u.show(),n.autoSelectFirst&&(this.selectedIndex=0,u.scrollTop(0),u.children("."+a).first().addClass(s)),this.visible=!0,this.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var e=this.options.beforeRender,n=t(this.suggestionsContainer),i=t(this.noSuggestionsContainer);this.adjustContainerWidth(),i.detach(),n.empty(),n.append(i),t.isFunction(e)&&e.call(this.element,n,this.suggestions),this.fixPosition(),n.show(),this.visible=!0},adjustContainerWidth:function(){var e,n=this.options,i=t(this.suggestionsContainer);"auto"===n.width?(e=this.el.outerWidth(),i.css("width",e>0?e:300)):"flex"===n.width&&i.css("width","")},findBestHint:function(){var e=this.el.val().toLowerCase(),n=null;e&&(t.each(this.suggestions,(function(t,i){var r=0===i.value.toLowerCase().indexOf(e);return r&&(n=i),!r})),this.signalHint(n))},signalHint:function(e){var n="";e&&(n=this.currentValue+e.value.substr(this.currentValue.length)),this.hintValue!==n&&(this.hintValue=n,this.hint=e,(this.options.onHint||t.noop)(n))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?t.map(e,(function(t){return{value:t,data:null}})):e},validateOrientation:function(e,n){return e=t.trim(e||"").toLowerCase(),-1===t.inArray(e,["auto","bottom","top"])&&(e=n),e},processResponse:function(t,e,n){var i=this.options;t.suggestions=this.verifySuggestionsFormat(t.suggestions),i.noCache||(this.cachedResponse[n]=t,i.preventBadQueries&&!t.suggestions.length&&this.badQueries.push(e)),e===this.getQuery(this.currentValue)&&(this.suggestions=t.suggestions,this.suggest())},activate:function(e){var n,i=this.classes.selected,r=t(this.suggestionsContainer),o=r.find("."+this.classes.suggestion);return r.find("."+i).removeClass(i),this.selectedIndex=e,-1!==this.selectedIndex&&o.length>this.selectedIndex?(n=o.get(this.selectedIndex),t(n).addClass(i),n):null},selectHint:function(){var e=t.inArray(this.hint,this.suggestions);this.select(e)},select:function(t){this.hide(),this.onSelect(t)},moveUp:function(){if(-1!==this.selectedIndex)return 0===this.selectedIndex?(t(this.suggestionsContainer).children("."+this.classes.suggestion).first().removeClass(this.classes.selected),this.selectedIndex=-1,this.ignoreValueChange=!1,this.el.val(this.currentValue),void this.findBestHint()):void this.adjustScroll(this.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var n=this.activate(e);if(n){var i,r,o,a=t(n).outerHeight();i=n.offsetTop,o=(r=t(this.suggestionsContainer).scrollTop())+this.options.maxHeight-a,i<r?t(this.suggestionsContainer).scrollTop(i):i>o&&t(this.suggestionsContainer).scrollTop(i-this.options.maxHeight+a),this.options.preserveInput||(this.ignoreValueChange=!0,this.el.val(this.getValue(this.suggestions[e].value))),this.signalHint(null)}},onSelect:function(e){var n=this.options.onSelect,i=this.suggestions[e];this.currentValue=this.getValue(i.value),this.currentValue===this.el.val()||this.options.preserveInput||this.el.val(this.currentValue),this.signalHint(null),this.suggestions=[],this.selection=i,t.isFunction(n)&&n.call(this.element,i)},getValue:function(t){var e,n,i=this.options.delimiter;return i?1===(n=(e=this.currentValue).split(i)).length?t:e.substr(0,e.length-n[n.length-1].length)+t:t},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),t(window).off("resize.autocomplete",this.fixPositionCapture),t(this.suggestionsContainer).remove()}},t.fn.devbridgeAutocomplete=function(e,n){var i="autocomplete";return arguments.length?this.each((function(){var r=t(this),o=r.data(i);"string"==typeof e?o&&"function"==typeof o[e]&&o[e](n):(o&&o.dispose&&o.dispose(),o=new c(this,e),r.data(i,o))})):this.first().data(i)},t.fn.autocomplete||(t.fn.autocomplete=t.fn.devbridgeAutocomplete)}))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){var i=!0;n.flexslider=function(e,r){var o=n(e);void 0===r.rtl&&"rtl"==n("html").attr("dir")&&(r.rtl=!0),o.vars=n.extend({},n.flexslider.defaults,r);var a,s=o.vars.namespace,u=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,c=("ontouchstart"in window||u||window.DocumentTouch&&document instanceof DocumentTouch)&&o.vars.touch,l="click touchend MSPointerUp keyup",f="",h="vertical"===o.vars.direction,d=o.vars.reverse,p=o.vars.itemWidth>0,m="fade"===o.vars.animation,g=""!==o.vars.asNavFor,v={};n.data(e,"flexslider",o),v={init:function(){o.animating=!1,o.currentSlide=parseInt(o.vars.startAt?o.vars.startAt:0,10),isNaN(o.currentSlide)&&(o.currentSlide=0),o.animatingTo=o.currentSlide,o.atEnd=0===o.currentSlide||o.currentSlide===o.last,o.containerSelector=o.vars.selector.substr(0,o.vars.selector.search(" ")),o.slides=n(o.vars.selector,o),o.container=n(o.containerSelector,o),o.count=o.slides.length,o.syncExists=n(o.vars.sync).length>0,"slide"===o.vars.animation&&(o.vars.animation="swing"),o.prop=h?"top":o.vars.rtl?"marginRight":"marginLeft",o.args={},o.manualPause=!1,o.stopped=!1,o.started=!1,o.startTimeout=null,o.transitions=!o.vars.video&&!m&&o.vars.useCSS&&function(){var t=document.createElement("div"),e=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in e)if(void 0!==t.style[e[n]])return o.pfx=e[n].replace("Perspective","").toLowerCase(),o.prop="-"+o.pfx+"-transform",!0;return!1}(),o.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,o.ensureAnimationEnd="",""!==o.vars.controlsContainer&&(o.controlsContainer=n(o.vars.controlsContainer).length>0&&n(o.vars.controlsContainer)),""!==o.vars.manualControls&&(o.manualControls=n(o.vars.manualControls).length>0&&n(o.vars.manualControls)),""!==o.vars.customDirectionNav&&(o.customDirectionNav=2===n(o.vars.customDirectionNav).length&&n(o.vars.customDirectionNav)),o.vars.randomize&&(o.slides.sort((function(){return Math.round(Math.random())-.5})),o.container.empty().append(o.slides)),o.doMath(),o.setup("init"),o.vars.controlNav&&v.controlNav.setup(),o.vars.directionNav&&v.directionNav.setup(),o.vars.keyboard&&(1===n(o.containerSelector).length||o.vars.multipleKeyboard)&&n(document).bind("keyup",(function(t){var e=t.keyCode;if(!o.animating&&(39===e||37===e)){var n=o.vars.rtl?37===e?o.getTarget("next"):39===e&&o.getTarget("prev"):39===e?o.getTarget("next"):37===e&&o.getTarget("prev");o.flexAnimate(n,o.vars.pauseOnAction)}})),o.vars.mousewheel&&o.bind("mousewheel",(function(t,e,n,i){t.preventDefault();var r=e<0?o.getTarget("next"):o.getTarget("prev");o.flexAnimate(r,o.vars.pauseOnAction)})),o.vars.pausePlay&&v.pausePlay.setup(),o.vars.slideshow&&o.vars.pauseInvisible&&v.pauseInvisible.init(),o.vars.slideshow&&(o.vars.pauseOnHover&&o.hover((function(){o.manualPlay||o.manualPause||o.pause()}),(function(){o.manualPause||o.manualPlay||o.stopped||o.play()})),o.vars.pauseInvisible&&v.pauseInvisible.isHidden()||(o.vars.initDelay>0?o.startTimeout=setTimeout(o.play,o.vars.initDelay):o.play())),g&&v.asNav.setup(),c&&o.vars.touch&&v.touch(),(!m||m&&o.vars.smoothHeight)&&n(window).bind("resize orientationchange focus",v.resize),o.find("img").attr("draggable","false"),setTimeout((function(){o.vars.start(o)}),200)},asNav:{setup:function(){o.asNav=!0,o.animatingTo=Math.floor(o.currentSlide/o.move),o.currentItem=o.currentSlide,o.slides.removeClass(s+"active-slide").eq(o.currentItem).addClass(s+"active-slide"),u?(e._slider=o,o.slides.each((function(){this._gesture=new MSGesture,this._gesture.target=this,this.addEventListener("MSPointerDown",(function(t){t.preventDefault(),t.currentTarget._gesture&&t.currentTarget._gesture.addPointer(t.pointerId)}),!1),this.addEventListener("MSGestureTap",(function(t){t.preventDefault();var e=n(this),i=e.index();n(o.vars.asNavFor).data("flexslider").animating||e.hasClass("active")||(o.direction=o.currentItem<i?"next":"prev",o.flexAnimate(i,o.vars.pauseOnAction,!1,!0,!0))}))}))):o.slides.on(l,(function(t){t.preventDefault();var e=n(this),i=e.index();(o.vars.rtl?-1*(e.offset().right-n(o).scrollLeft()):e.offset().left-n(o).scrollLeft())<=0&&e.hasClass(s+"active-slide")?o.flexAnimate(o.getTarget("prev"),!0):n(o.vars.asNavFor).data("flexslider").animating||e.hasClass(s+"active-slide")||(o.direction=o.currentItem<i?"next":"prev",o.flexAnimate(i,o.vars.pauseOnAction,!1,!0,!0))}))}},controlNav:{setup:function(){o.manualControls?v.controlNav.setupManual():v.controlNav.setupPaging()},setupPaging:function(){var t,e,i="thumbnails"===o.vars.controlNav?"control-thumbs":"control-paging",r=1;if(o.controlNavScaffold=n('<ol class="'+s+"control-nav "+s+i+'"></ol>'),o.pagingCount>1)for(var a=0;a<o.pagingCount;a++){if(void 0===(e=o.slides.eq(a)).attr("data-thumb-alt")&&e.attr("data-thumb-alt",""),t=n("<a></a>").attr("href","#").text(r),"thumbnails"===o.vars.controlNav&&(t=n("<img/>").attr("src",e.attr("data-thumb"))),""!==e.attr("data-thumb-alt")&&t.attr("alt",e.attr("data-thumb-alt")),"thumbnails"===o.vars.controlNav&&!0===o.vars.thumbCaptions){var u=e.attr("data-thumbcaption");if(""!==u&&void 0!==u){var c=n("<span></span>").addClass(s+"caption").text(u);t.append(c)}}var h=n("<li>");t.appendTo(h),h.append("</li>"),o.controlNavScaffold.append(h),r++}o.controlsContainer?n(o.controlsContainer).append(o.controlNavScaffold):o.append(o.controlNavScaffold),v.controlNav.set(),v.controlNav.active(),o.controlNavScaffold.delegate("a, img",l,(function(t){if(t.preventDefault(),""===f||f===t.type){var e=n(this),i=o.controlNav.index(e);e.hasClass(s+"active")||(o.direction=i>o.currentSlide?"next":"prev",o.flexAnimate(i,o.vars.pauseOnAction))}""===f&&(f=t.type),v.setToClearWatchedEvent()}))},setupManual:function(){o.controlNav=o.manualControls,v.controlNav.active(),o.controlNav.bind(l,(function(t){if(t.preventDefault(),""===f||f===t.type){var e=n(this),i=o.controlNav.index(e);e.hasClass(s+"active")||(i>o.currentSlide?o.direction="next":o.direction="prev",o.flexAnimate(i,o.vars.pauseOnAction))}""===f&&(f=t.type),v.setToClearWatchedEvent()}))},set:function(){var t="thumbnails"===o.vars.controlNav?"img":"a";o.controlNav=n("."+s+"control-nav li "+t,o.controlsContainer?o.controlsContainer:o)},active:function(){o.controlNav.removeClass(s+"active").eq(o.animatingTo).addClass(s+"active")},update:function(t,e){o.pagingCount>1&&"add"===t?o.controlNavScaffold.append(n('<li><a href="#">'+o.count+"</a></li>")):1===o.pagingCount?o.controlNavScaffold.find("li").remove():o.controlNav.eq(e).closest("li").remove(),v.controlNav.set(),o.pagingCount>1&&o.pagingCount!==o.controlNav.length?o.update(e,t):v.controlNav.active()}},directionNav:{setup:function(){var t=n('<ul class="'+s+'direction-nav"><li class="'+s+'nav-prev"><a class="'+s+'prev" href="#">'+o.vars.prevText+'</a></li><li class="'+s+'nav-next"><a class="'+s+'next" href="#">'+o.vars.nextText+"</a></li></ul>");o.customDirectionNav?o.directionNav=o.customDirectionNav:o.controlsContainer?(n(o.controlsContainer).append(t),o.directionNav=n("."+s+"direction-nav li a",o.controlsContainer)):(o.append(t),o.directionNav=n("."+s+"direction-nav li a",o)),v.directionNav.update(),o.directionNav.bind(l,(function(t){var e;t.preventDefault(),""!==f&&f!==t.type||(e=n(this).hasClass(s+"next")?o.getTarget("next"):o.getTarget("prev"),o.flexAnimate(e,o.vars.pauseOnAction)),""===f&&(f=t.type),v.setToClearWatchedEvent()}))},update:function(){var t=s+"disabled";1===o.pagingCount?o.directionNav.addClass(t).attr("tabindex","-1"):o.vars.animationLoop?o.directionNav.removeClass(t).removeAttr("tabindex"):0===o.animatingTo?o.directionNav.removeClass(t).filter("."+s+"prev").addClass(t).attr("tabindex","-1"):o.animatingTo===o.last?o.directionNav.removeClass(t).filter("."+s+"next").addClass(t).attr("tabindex","-1"):o.directionNav.removeClass(t).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=n('<div class="'+s+'pauseplay"><a href="#"></a></div>');o.controlsContainer?(o.controlsContainer.append(t),o.pausePlay=n("."+s+"pauseplay a",o.controlsContainer)):(o.append(t),o.pausePlay=n("."+s+"pauseplay a",o)),v.pausePlay.update(o.vars.slideshow?s+"pause":s+"play"),o.pausePlay.bind(l,(function(t){t.preventDefault(),""!==f&&f!==t.type||(n(this).hasClass(s+"pause")?(o.manualPause=!0,o.manualPlay=!1,o.pause()):(o.manualPause=!1,o.manualPlay=!0,o.play())),""===f&&(f=t.type),v.setToClearWatchedEvent()}))},update:function(t){"play"===t?o.pausePlay.removeClass(s+"pause").addClass(s+"play").html(o.vars.playText):o.pausePlay.removeClass(s+"play").addClass(s+"pause").html(o.vars.pauseText)}},touch:function(){var n,i,r,a,s,c,l,f,g,v=!1,y=0,b=0,_=0;if(u){e.style.msTouchAction="none",e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",(function(t){t.stopPropagation(),o.animating?t.preventDefault():(o.pause(),e._gesture.addPointer(t.pointerId),_=0,a=h?o.h:o.w,c=Number(new Date),r=p&&d&&o.animatingTo===o.last?0:p&&d?o.limit-(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo:p&&o.currentSlide===o.last?o.limit:p?(o.itemW+o.vars.itemMargin)*o.move*o.currentSlide:d?(o.last-o.currentSlide+o.cloneOffset)*a:(o.currentSlide+o.cloneOffset)*a)}),!1),e._slider=o,e.addEventListener("MSGestureChange",(function(n){n.stopPropagation();var i=n.target._slider;if(!i)return;var o=-n.translationX,u=-n.translationY;if(_+=h?u:o,s=(i.vars.rtl?-1:1)*_,v=h?Math.abs(_)<Math.abs(-o):Math.abs(_)<Math.abs(-u),n.detail===n.MSGESTURE_FLAG_INERTIA)return void t((function(){e._gesture.stop()}));(!v||Number(new Date)-c>500)&&(n.preventDefault(),!m&&i.transitions&&(i.vars.animationLoop||(s=_/(0===i.currentSlide&&_<0||i.currentSlide===i.last&&_>0?Math.abs(_)/a+2:1)),i.setProps(r+s,"setTouch")))}),!1),e.addEventListener("MSGestureEnd",(function(t){t.stopPropagation();var e=t.target._slider;if(!e)return;if(e.animatingTo===e.currentSlide&&!v&&null!==s){var o=d?-s:s,u=o>0?e.getTarget("next"):e.getTarget("prev");e.canAdvance(u)&&(Number(new Date)-c<550&&Math.abs(o)>50||Math.abs(o)>a/2)?e.flexAnimate(u,e.vars.pauseOnAction):m||e.flexAnimate(e.currentSlide,e.vars.pauseOnAction,!0)}n=null,i=null,s=null,r=null,_=0}),!1)}else l=function(t){o.animating?t.preventDefault():(window.navigator.msPointerEnabled||1===t.touches.length)&&(o.pause(),a=h?o.h:o.w,c=Number(new Date),y=t.touches[0].pageX,b=t.touches[0].pageY,r=p&&d&&o.animatingTo===o.last?0:p&&d?o.limit-(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo:p&&o.currentSlide===o.last?o.limit:p?(o.itemW+o.vars.itemMargin)*o.move*o.currentSlide:d?(o.last-o.currentSlide+o.cloneOffset)*a:(o.currentSlide+o.cloneOffset)*a,n=h?b:y,i=h?y:b,e.addEventListener("touchmove",f,!1),e.addEventListener("touchend",g,!1))},f=function(t){y=t.touches[0].pageX,b=t.touches[0].pageY,s=h?n-b:(o.vars.rtl?-1:1)*(n-y);(!(v=h?Math.abs(s)<Math.abs(y-i):Math.abs(s)<Math.abs(b-i))||Number(new Date)-c>500)&&(t.preventDefault(),!m&&o.transitions&&(o.vars.animationLoop||(s/=0===o.currentSlide&&s<0||o.currentSlide===o.last&&s>0?Math.abs(s)/a+2:1),o.setProps(r+s,"setTouch")))},g=function(t){if(e.removeEventListener("touchmove",f,!1),o.animatingTo===o.currentSlide&&!v&&null!==s){var u=d?-s:s,l=u>0?o.getTarget("next"):o.getTarget("prev");o.canAdvance(l)&&(Number(new Date)-c<550&&Math.abs(u)>50||Math.abs(u)>a/2)?o.flexAnimate(l,o.vars.pauseOnAction):m||o.flexAnimate(o.currentSlide,o.vars.pauseOnAction,!0)}e.removeEventListener("touchend",g,!1),n=null,i=null,s=null,r=null},e.addEventListener("touchstart",l,!1)},resize:function(){!o.animating&&o.is(":visible")&&(p||o.doMath(),m?v.smoothHeight():p?(o.slides.width(o.computedW),o.update(o.pagingCount),o.setProps()):h?(o.viewport.height(o.h),o.setProps(o.h,"setTotal")):(o.vars.smoothHeight&&v.smoothHeight(),o.newSlides.width(o.computedW),o.setProps(o.computedW,"setTotal")))},smoothHeight:function(t){if(!h||m){var e=m?o:o.viewport;t?e.animate({height:o.slides.eq(o.animatingTo).innerHeight()},t):e.innerHeight(o.slides.eq(o.animatingTo).innerHeight())}},sync:function(t){var e=n(o.vars.sync).data("flexslider"),i=o.animatingTo;switch(t){case"animate":e.flexAnimate(i,o.vars.pauseOnAction,!1,!0);break;case"play":e.playing||e.asNav||e.play();break;case"pause":e.pause()}},uniqueID:function(t){return t.filter("[id]").add(t.find("[id]")).each((function(){var t=n(this);t.attr("id",t.attr("id")+"_clone")})),t},pauseInvisible:{visProp:null,init:function(){var t=v.pauseInvisible.getHiddenProp();if(t){var e=t.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(e,(function(){v.pauseInvisible.isHidden()?o.startTimeout?clearTimeout(o.startTimeout):o.pause():o.started?o.play():o.vars.initDelay>0?setTimeout(o.play,o.vars.initDelay):o.play()}))}},isHidden:function(){var t=v.pauseInvisible.getHiddenProp();return!!t&&document[t]},getHiddenProp:function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(a),a=setTimeout((function(){f=""}),3e3)}},o.flexAnimate=function(t,e,i,r,a){if(o.vars.animationLoop||t===o.currentSlide||(o.direction=t>o.currentSlide?"next":"prev"),g&&1===o.pagingCount&&(o.direction=o.currentItem<t?"next":"prev"),!o.animating&&(o.canAdvance(t,a)||i)&&o.is(":visible")){if(g&&r){var u=n(o.vars.asNavFor).data("flexslider");if(o.atEnd=0===t||t===o.count-1,u.flexAnimate(t,!0,!1,!0,a),o.direction=o.currentItem<t?"next":"prev",u.direction=o.direction,Math.ceil((t+1)/o.visible)-1===o.currentSlide||0===t)return o.currentItem=t,o.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),!1;o.currentItem=t,o.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),t=Math.floor(t/o.visible)}if(o.animating=!0,o.animatingTo=t,e&&o.pause(),o.vars.before(o),o.syncExists&&!a&&v.sync("animate"),o.vars.controlNav&&v.controlNav.active(),p||o.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),o.atEnd=0===t||t===o.last,o.vars.directionNav&&v.directionNav.update(),t===o.last&&(o.vars.end(o),o.vars.animationLoop||o.pause()),m)c?(o.slides.eq(o.currentSlide).css({opacity:0,zIndex:1}),o.slides.eq(t).css({opacity:1,zIndex:2}),o.wrapup(b)):(o.slides.eq(o.currentSlide).css({zIndex:1}).animate({opacity:0},o.vars.animationSpeed,o.vars.easing),o.slides.eq(t).css({zIndex:2}).animate({opacity:1},o.vars.animationSpeed,o.vars.easing,o.wrapup));else{var l,f,y,b=h?o.slides.filter(":first").height():o.computedW;p?(l=o.vars.itemMargin,f=(y=(o.itemW+l)*o.move*o.animatingTo)>o.limit&&1!==o.visible?o.limit:y):f=0===o.currentSlide&&t===o.count-1&&o.vars.animationLoop&&"next"!==o.direction?d?(o.count+o.cloneOffset)*b:0:o.currentSlide===o.last&&0===t&&o.vars.animationLoop&&"prev"!==o.direction?d?0:(o.count+1)*b:d?(o.count-1-t+o.cloneOffset)*b:(t+o.cloneOffset)*b,o.setProps(f,"",o.vars.animationSpeed),o.transitions?(o.vars.animationLoop&&o.atEnd||(o.animating=!1,o.currentSlide=o.animatingTo),o.container.unbind("webkitTransitionEnd transitionend"),o.container.bind("webkitTransitionEnd transitionend",(function(){clearTimeout(o.ensureAnimationEnd),o.wrapup(b)})),clearTimeout(o.ensureAnimationEnd),o.ensureAnimationEnd=setTimeout((function(){o.wrapup(b)}),o.vars.animationSpeed+100)):o.container.animate(o.args,o.vars.animationSpeed,o.vars.easing,(function(){o.wrapup(b)}))}o.vars.smoothHeight&&v.smoothHeight(o.vars.animationSpeed)}},o.wrapup=function(t){m||p||(0===o.currentSlide&&o.animatingTo===o.last&&o.vars.animationLoop?o.setProps(t,"jumpEnd"):o.currentSlide===o.last&&0===o.animatingTo&&o.vars.animationLoop&&o.setProps(t,"jumpStart")),o.animating=!1,o.currentSlide=o.animatingTo,o.vars.after(o)},o.animateSlides=function(){!o.animating&&i&&o.flexAnimate(o.getTarget("next"))},o.pause=function(){clearInterval(o.animatedSlides),o.animatedSlides=null,o.playing=!1,o.vars.pausePlay&&v.pausePlay.update("play"),o.syncExists&&v.sync("pause")},o.play=function(){o.playing&&clearInterval(o.animatedSlides),o.animatedSlides=o.animatedSlides||setInterval(o.animateSlides,o.vars.slideshowSpeed),o.started=o.playing=!0,o.vars.pausePlay&&v.pausePlay.update("pause"),o.syncExists&&v.sync("play")},o.stop=function(){o.pause(),o.stopped=!0},o.canAdvance=function(t,e){var n=g?o.pagingCount-1:o.last;return!!e||(!(!g||o.currentItem!==o.count-1||0!==t||"prev"!==o.direction)||(!g||0!==o.currentItem||t!==o.pagingCount-1||"next"===o.direction)&&(!(t===o.currentSlide&&!g)&&(!!o.vars.animationLoop||(!o.atEnd||0!==o.currentSlide||t!==n||"next"===o.direction)&&(!o.atEnd||o.currentSlide!==n||0!==t||"next"!==o.direction))))},o.getTarget=function(t){return o.direction=t,"next"===t?o.currentSlide===o.last?0:o.currentSlide+1:0===o.currentSlide?o.last:o.currentSlide-1},o.setProps=function(t,e,n){var i,r=(i=t||(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo,function(){if(p)return"setTouch"===e?t:d&&o.animatingTo===o.last?0:d?o.limit-(o.itemW+o.vars.itemMargin)*o.move*o.animatingTo:o.animatingTo===o.last?o.limit:i;switch(e){case"setTotal":return d?(o.count-1-o.currentSlide+o.cloneOffset)*t:(o.currentSlide+o.cloneOffset)*t;case"setTouch":return t;case"jumpEnd":return d?t:o.count*t;case"jumpStart":return d?o.count*t:t;default:return t}}()*(o.vars.rtl?1:-1)+"px");o.transitions&&(r=o.isFirefox?h?"translate3d(0,"+r+",0)":"translate3d("+parseInt(r)+"px,0,0)":h?"translate3d(0,"+r+",0)":"translate3d("+(o.vars.rtl?-1:1)*parseInt(r)+"px,0,0)",n=void 0!==n?n/1e3+"s":"0s",o.container.css("-"+o.pfx+"-transition-duration",n),o.container.css("transition-duration",n)),o.args[o.prop]=r,(o.transitions||void 0===n)&&o.container.css(o.args),o.container.css("transform",r)},o.setup=function(t){var e,i;m?(o.vars.rtl?o.slides.css({width:"100%",float:"right",marginLeft:"-100%",position:"relative"}):o.slides.css({width:"100%",float:"left",marginRight:"-100%",position:"relative"}),"init"===t&&(c?o.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+o.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(o.currentSlide).css({opacity:1,zIndex:2}):0==o.vars.fadeFirstSlide?o.slides.css({opacity:0,display:"block",zIndex:1}).eq(o.currentSlide).css({zIndex:2}).css({opacity:1}):o.slides.css({opacity:0,display:"block",zIndex:1}).eq(o.currentSlide).css({zIndex:2}).animate({opacity:1},o.vars.animationSpeed,o.vars.easing)),o.vars.smoothHeight&&v.smoothHeight()):("init"===t&&(o.viewport=n('<div class="'+s+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(o).append(o.container),o.cloneCount=0,o.cloneOffset=0,d&&(i=n.makeArray(o.slides).reverse(),o.slides=n(i),o.container.empty().append(o.slides))),o.vars.animationLoop&&!p&&(o.cloneCount=2,o.cloneOffset=1,"init"!==t&&o.container.find(".clone").remove(),o.container.append(v.uniqueID(o.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(v.uniqueID(o.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),o.newSlides=n(o.vars.selector,o),e=d?o.count-1-o.currentSlide+o.cloneOffset:o.currentSlide+o.cloneOffset,h&&!p?(o.container.height(200*(o.count+o.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout((function(){o.newSlides.css({display:"block"}),o.doMath(),o.viewport.height(o.h),o.setProps(e*o.h,"init")}),"init"===t?100:0)):(o.container.width(200*(o.count+o.cloneCount)+"%"),o.setProps(e*o.computedW,"init"),setTimeout((function(){o.doMath(),o.vars.rtl&&o.isFirefox?o.newSlides.css({width:o.computedW,marginRight:o.computedM,float:"right",display:"block"}):o.newSlides.css({width:o.computedW,marginRight:o.computedM,float:"left",display:"block"}),o.vars.smoothHeight&&v.smoothHeight()}),"init"===t?100:0)));p||o.slides.removeClass(s+"active-slide").eq(o.currentSlide).addClass(s+"active-slide"),o.vars.init(o)},o.doMath=function(){var t=o.slides.first(),e=o.vars.itemMargin,n=o.vars.minItems,i=o.vars.maxItems;o.w=void 0===o.viewport?o.width():o.viewport.width(),o.isFirefox&&(o.w=o.width()),o.h=t.height(),o.boxPadding=t.outerWidth()-t.width(),p?(o.itemT=o.vars.itemWidth+e,o.itemM=e,o.minW=n?n*o.itemT:o.w,o.maxW=i?i*o.itemT-e:o.w,o.itemW=o.minW>o.w?(o.w-e*(n-1))/n:o.maxW<o.w?(o.w-e*(i-1))/i:o.vars.itemWidth>o.w?o.w:o.vars.itemWidth,o.visible=Math.floor(o.w/o.itemW),o.move=o.vars.move>0&&o.vars.move<o.visible?o.vars.move:o.visible,o.pagingCount=Math.ceil((o.count-o.visible)/o.move+1),o.last=o.pagingCount-1,o.limit=1===o.pagingCount?0:o.vars.itemWidth>o.w?o.itemW*(o.count-1)+e*(o.count-1):(o.itemW+e)*o.count-o.w-e):(o.itemW=o.w,o.itemM=e,o.pagingCount=o.count,o.last=o.count-1),o.computedW=o.itemW-o.boxPadding,o.computedM=o.itemM},o.update=function(t,e){o.doMath(),p||(t<o.currentSlide?o.currentSlide+=1:t<=o.currentSlide&&0!==t&&(o.currentSlide-=1),o.animatingTo=o.currentSlide),o.vars.controlNav&&!o.manualControls&&("add"===e&&!p||o.pagingCount>o.controlNav.length?v.controlNav.update("add"):("remove"===e&&!p||o.pagingCount<o.controlNav.length)&&(p&&o.currentSlide>o.last&&(o.currentSlide-=1,o.animatingTo-=1),v.controlNav.update("remove",o.last))),o.vars.directionNav&&v.directionNav.update()},o.addSlide=function(t,e){var i=n(t);o.count+=1,o.last=o.count-1,h&&d?void 0!==e?o.slides.eq(o.count-e).after(i):o.container.prepend(i):void 0!==e?o.slides.eq(e).before(i):o.container.append(i),o.update(e,"add"),o.slides=n(o.vars.selector+":not(.clone)",o),o.setup(),o.vars.added(o)},o.removeSlide=function(t){var e=isNaN(t)?o.slides.index(n(t)):t;o.count-=1,o.last=o.count-1,isNaN(t)?n(t,o.slides).remove():h&&d?o.slides.eq(o.last).remove():o.slides.eq(t).remove(),o.doMath(),o.update(e,"remove"),o.slides=n(o.vars.selector+":not(.clone)",o),o.setup(),o.vars.removed(o)},v.init()},n(window).blur((function(t){i=!1})).focus((function(t){i=!0})),n.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,isFirefox:!1,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){},rtl:!1},n.fn.flexslider=function(t){if(void 0===t&&(t={}),"object"===e(t))return this.each((function(){var e=n(this),i=t.selector?t.selector:".slides > li",r=e.find(i);1===r.length&&!1===t.allowOneSlide||0===r.length?(r.fadeIn(400),t.start&&t.start(e)):void 0===e.data("flexslider")&&new n.flexslider(this,t)}));var i=n(this).data("flexslider");switch(t){case"play":i.play();break;case"pause":i.pause();break;case"stop":i.stop();break;case"next":i.flexAnimate(i.getTarget("next"),!0);break;case"prev":case"previous":i.flexAnimate(i.getTarget("prev"),!0);break;default:"number"==typeof t&&i.flexAnimate(t,!0)}}}(jQuery)}).call(this,n(131).setImmediate)},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(i,r){"use strict";"object"==e(t)&&t.exports?t.exports=r(i,n(475)):i.imagesLoaded=r(i,i.EvEmitter)}("undefined"!=typeof window?window:this,(function(t,n){"use strict";var i=t.jQuery,r=t.console;function o(t,e){for(var n in e)t[n]=e[n];return t}var a=Array.prototype.slice;function s(t,n,u){if(!(this instanceof s))return new s(t,n,u);var c,l=t;("string"==typeof t&&(l=document.querySelectorAll(t)),l)?(this.elements=(c=l,Array.isArray(c)?c:"object"==e(c)&&"number"==typeof c.length?a.call(c):[c]),this.options=o({},this.options),"function"==typeof n?u=n:o(this.options,n),u&&this.on("always",u),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))):r.error("Bad element for imagesLoaded "+(l||t))}s.prototype=Object.create(n.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&u[e]){for(var n=t.querySelectorAll("img"),i=0;i<n.length;i++){var r=n[i];this.addImage(r)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(i=0;i<o.length;i++){var a=o[i];this.addElementBackgroundImages(a)}}}};var u={1:!0,9:!0,11:!0};function c(t){this.img=t}function l(t,e){this.url=t,this.element=e,this.img=new Image}return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var n=/url\((['"])?(.*?)\1\)/gi,i=n.exec(e.backgroundImage);null!==i;){var r=i&&i[2];r&&this.addBackground(r,t),i=n.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new c(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var n=new l(t,e);this.images.push(n)},s.prototype.check=function(){var t=this;function e(e,n,i){setTimeout((function(){t.progress(e,n,i)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(t){t.once("progress",e),t.check()})):this.complete()},s.prototype.progress=function(t,e,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&r&&r.log("progress: "+n,t,e)},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},c.prototype=Object.create(n.prototype),c.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},c.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},c.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},c.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},l.prototype=Object.create(c.prototype),l.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},l.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},l.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((i=e).fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(i(this))})},s.makeJQueryPlugin(),s}))}).call(this,n(15)(t))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,i;n="undefined"!=typeof window?window:this,i=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},i=n[t]=n[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=n.indexOf(e);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],r=0;r<n.length;r++){var o=n[r];i&&i[o]&&(this.off(t,o),delete i[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t},"object"==e(t)&&t.exports?t.exports=i():n.EvEmitter=i()}).call(this,n(15)(t))},function(t,e){$(document).on("ajaxSuccess",(function(t,e,n,i){var r,o;return(o=[]).push(i),o.push(e.statusText),o.push(e),r=new CustomEvent("ajax:success",{bubbles:!0,cancelable:!0,detail:o}),t.target.dispatchEvent(r)}))},function(t,e){!function(t){"use strict";t.event.special.dragbetterenter={setup:function(){var e=this,n=t(e);e.dragbetterCollection=[],n.on("dragenter.dragbetterenter",(function(t){0===e.dragbetterCollection.length&&n.triggerHandler("dragbetterenter"),e.dragbetterCollection.push(t.target)})),n.on("drop.dragbetterenter dragend.dragbetterenter",(function(){e.dragbetterCollection=[],n.triggerHandler("dragbetterleave")}))},teardown:function(){t(this).off(".dragbetterenter")}},t.event.special.dragbetterleave={setup:function(){if(!this.dragbetterCollection)throw"Triggered dragbetterleave without dragbetterenter. Do you listen to dragbetterenter?";var e=this,n=t(e);n.on("dragleave.dragbetterleave",(function(t){setTimeout((function(){var i=e.dragbetterCollection.indexOf(t.target);i>-1&&e.dragbetterCollection.splice(i,1),0===e.dragbetterCollection.length&&n.triggerHandler("dragbetterleave")}),1)}))},teardown:function(){t(this).off(".dragbetterleave")}}}(window.jQuery)},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,o;r=this,o=function(t){"use strict";t.fn.typeWatch=function(e){var n=t.extend({wait:750,callback:function(){},highlight:!0,captureLength:2,allowSubmit:!1,inputTypes:["TEXT","TEXTAREA","PASSWORD","TEL","SEARCH","URL","EMAIL","DATETIME","DATE","MONTH","WEEK","TIME","DATETIME-LOCAL","NUMBER","RANGE","DIV"]},e);function i(t){var e=(t.type||t.nodeName).toUpperCase();if(jQuery.inArray(e,n.inputTypes)>=0){var i={timer:null,text:"DIV"===e?jQuery(t).html():jQuery(t).val(),cb:n.callback,el:t,type:e,wait:n.wait};n.highlight&&"DIV"!==e&&jQuery(t).focus((function(){this.select()})),jQuery(t).on("keydown paste cut input",(function(t){var r=i.wait,o=!1,a=e;void 0!==t.keyCode&&13==t.keyCode&&"TEXTAREA"!==a&&"DIV"!==e&&(console.log("OVERRIDE"),r=1,o=!0),clearTimeout(i.timer),i.timer=setTimeout((function(){!function(t,e){var i="DIV"===t.type?jQuery(t.el).html():jQuery(t.el).val();(i.length>=n.captureLength&&i!=t.text||e&&(i.length>=n.captureLength||n.allowSubmit)||0==i.length&&t.text)&&(t.text=i,t.cb.call(t.el,i))}(i,o)}),r)}))}}return this.each((function(){i(this)}))}},"object"===i(e)?o(n(16)):o(r.jQuery)},function(t,e,n){var i={"./add_to_plan_controller.js":480,"./banner_controller.js":481,"./bookmark_controller.js":482,"./comment_attachment_controller.js":483,"./comment_thread_controller.js":484,"./comments_count_controller.js":485,"./content_loader_controller.js":486,"./cookplan-tray-controller.js":487,"./dir_controller.js":488,"./emoji_picker_controller.js":576,"./emptier_controller.js":489,"./focus_controller.js":490,"./gallery_controller.js":491,"./infinite_scroll_controller.js":493,"./intercept_banner_controller.js":494,"./link_rewrite_controller.js":495,"./localtime_controller.js":90,"./masonry_controller.js":496,"./modal_form_controller.js":497,"./premium_intercept_controller.js":498,"./reactions_controller.js":499,"./redirect_controller.js":500,"./relative_time_controller.js":89,"./root_comments_controller.js":501,"./search_controller.js":502,"./slider_controller.js":503,"./source_tracking_controller.js":504,"./step_delete_confirmation_controller.js":505,"./submit_focuser_controller.js":506,"./tab_bar_controller.js":507,"./toast_messages_controller.js":508,"./toasts_controller.js":509,"./toggle_controller.js":510,"./tray_sliding_controller.js":511};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=479},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(45);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"initialize",value:function(){this.buttonUrlAttribute="action",this.cookplanIdPlaceholder=this.data.get("placeholder"),this.visibilityClass=this.data.get("visibilityClass"),this.recipeId=parseInt(this.data.get("recipeId"))}},{key:"emitUpdatedEvent",value:function(t){this.element.dispatchEvent(r.a.cookplanUpdated(t.detail[0]))}},{key:"updateButton",value:function(t){this.recipeId===t.detail.recipeId&&(this._toggleVisibility(),this._updateActionUrl(t))}},{key:"_toggleVisibility",value:function(){this.element.classList.toggle(this.visibilityClass)}},{key:"_updateActionUrl",value:function(t){if(!this._cookplanIdPlaceholderIsAbsent()){var e=this.urlTemplate.replace(this.cookplanIdPlaceholder,t.detail.cookplanId);this.alternateButtonTarget.setAttribute(this.buttonUrlAttribute,e)}}},{key:"_cookplanIdPlaceholderIsAbsent",value:function(){return-1===this.urlTemplate.lastIndexOf(this.cookplanIdPlaceholder)}},{key:"urlTemplate",get:function(){return this.alternateButtonTarget.getAttribute(this.buttonUrlAttribute)}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b);c.targets=["alternateButton"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(10);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"dismiss",value:function(t){var e=this.data.get("cookie"),n=parseInt(this.data.get("expires"));t.preventDefault(),r.a.setCookie(e,"1",n),this.bannerTarget.parentNode.removeChild(this.bannerTarget)}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b);c.targets=["banner"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=Symbol("showPopover"),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,a(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n=e,(i=[{key:"toggleBookmark",value:function(){var t=this.data.get("first-bookmark"),e=$(this.element),n=this.data.get("bookmarked-class");App.currentUser&&e.toggleClass(n),e.hasClass(n)&&t&&(this.data.set("first-bookmark","false"),this[u](e))}},{key:u,value:function(t){t.popover({container:t,content:this.data.get("first-bookmark-popover"),html:!0,placement:"top",sanitize:!1,trigger:"manual"}).popover("show")}}])&&r(n.prototype,i),c&&r(n,c),e}(i.b)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var i=n(0),r=n(95),o=n(10);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,u(e).apply(this,arguments))}var n,i,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this.resetAll();var t={start:this.preparingToUpload.bind(this),progress:this.displayUploadProgress.bind(this),done:this.imageUploaded.bind(this)};Object(r.a)(this.fileInputTarget,this.data.get("url"),t),"true"==this.data.get("show-filepicker")&&this.fileInputTarget.click()}},{key:"closeImage",value:function(t){t.preventDefault(),this.resetAll()}},{key:"resetAll",value:function(){this.imageContainerTarget.textContent=null,this.shareInputTarget.checked=!1,this.hasContainerTarget&&this.hasCloseButtonTarget&&(o.a.hideElement(this.containerTarget),o.a.hideElement(this.closeButtonTarget)),o.a.disableElement(this.imageIdFieldTarget)}},{key:"preparingToUpload",value:function(){this.resetAll(),this.shareInputTarget.checked=!0,this.hasContainerTarget&&o.a.showElement(this.containerTarget)}},{key:"imageUploaded",value:function(t,e){this.imageContainerTarget.innerHTML=e.result.html,this.imageIdFieldTarget.value=e.result.id,this.hasCloseButtonTarget&&o.a.showElement(this.closeButtonTarget),o.a.enableElement(this.imageIdFieldTarget)}},{key:"displayUploadProgress",value:function(t,e){this.imageContainerTarget.textContent="".concat(Math.ceil(e.loaded/e.total*100),"%")}}])&&a(n.prototype,i),l&&a(n,l),e}(i.b);l.targets=["fileInput","container","closeButton","imageContainer","imageIdField","shareInput"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var i=n(0),r=n(10),o=n(45);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,u(e).apply(this,arguments))}var n,i,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"handleReplyClick",value:function(t){if(t.preventDefault(),this.rootTarget.contains(t.target))this._toggleRootForm();else{var e=this.commentTargets.filter((function(e){return e.contains(t.target)}))[0];this._setupFormFor(e)}}},{key:"clearForm",value:function(t){t.preventDefault(),this._clearForm()}},{key:"appendReplyFromForm",value:function(t){this._insertReply(this._extractReply(t)),this._clearForm()}},{key:"appendReplyFromRootForm",value:function(t){this._insertReply(this._extractReply(t)),this._toggleRootForm(),this.formTarget.classList.remove("hidden")}},{key:"_clearForm",value:function(){this._updateFormUrl(this.rootForm.getAttribute("action")),this._deleteContent(),this._setReplyStatus(null),this._focusOnForm()}},{key:"_focusOnForm",value:function(){this.formTextArea.focus()}},{key:"_insertReply",value:function(t){this.repliesTarget.appendChild(t),this.latestReply.dispatchEvent(o.a.commentAdded)}},{key:"_displayFormTarget",value:function(){this.formTarget.classList.remove("hidden")}},{key:"_toggleRootForm",value:function(){this.rootFormTarget.classList.toggle("hidden"),this.rootFormTarget.classList.contains("hidden")||this.rootFormTarget.querySelector("trix-editor").focus()}},{key:"_setupFormFor",value:function(t){this._updateFormUrl(t.dataset.replyPath),this._setReplyStatus(t.dataset.replyStatus),this.form.dispatchEvent(this._replyFormReadyEvent(t.dataset.replyMention)),this._displayFormTarget(),this._focusOnForm()}},{key:"_updateFormUrl",value:function(t){this.form.setAttribute("action",t)}},{key:"_setReplyStatus",value:function(t){t?(this.replyStatusText.innerHTML=t,this.replyStatus.classList.remove("hidden")):this.replyStatus.classList.add("hidden")}},{key:"_deleteContent",value:function(){this.editor.loadHTML("")}},{key:"_extractReply",value:function(t){var e=t.detail[0].html;return r.a.extractHTML(e,'[data-target~="comment-thread.comment"]')}},{key:"_replyFormReadyEvent",value:function(t){return new CustomEvent("replyFormReady",{bubbles:!0,detail:{mention:t}})}},{key:"form",get:function(){return this.formTarget.querySelector("form")}},{key:"rootForm",get:function(){return this.rootFormTarget.querySelector("form")}},{key:"formTextArea",get:function(){return this.formTarget.querySelector("trix-editor")}},{key:"editor",get:function(){return this.formTextArea.editor}},{key:"replyStatus",get:function(){return this.formTarget.querySelector("#reply-status")}},{key:"replyStatusText",get:function(){return this.replyStatus.firstElementChild}},{key:"latestReply",get:function(){return this.commentTargets.slice(-1)[0]}}])&&a(n.prototype,i),l&&a(n,l),e}(i.b);l.targets=["root","rootForm","form","comment","replies"]},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"increment",value:function(){this.countTarget.innerHTML=parseInt(this.countTarget.innerText)+1}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b);s.targets=["count"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(10);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this.visibilityObserver=null,this.fetched=!1,this.isVisible?this._loadContent():this._loadContentOnVisible()}},{key:"disconnect",value:function(){this.visibilityObserver&&this.visibilityObserver.disconnect()}},{key:"_loadContentOnVisible",value:function(){this.visibilityObserver=new MutationObserver(this._visibilityObserverCallback.bind(this)),this.visibilityObserver.observe(this.element,{attributes:!0,childList:!1,subtree:!1})}},{key:"_visibilityObserverCallback",value:function(t,e){this.isVisible&&this._loadContent()}},{key:"_loadContent",value:function(){var t=this;this.fetched||(this.fetched=!0,Rails.ajax({type:"GET",url:this.data.get("url"),success:function(e){t._appendHtml(e),Rails.fire(t.element,"ajax:success")}}))}},{key:"_appendHtml",value:function(t){var e=this;t.querySelectorAll(this.responseSelector).forEach((function(t){e.element.append(t)}))}},{key:"isVisible",get:function(){return r.a.isVisible(this.element)}},{key:"responseSelector",get:function(){return this.data.get("responseSelector")}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"updateTray",value:function(t){this.element.outerHTML=t.detail.trayHtml}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"connect",value:function(){this.autoTargets.forEach((function(t){t.setAttribute("dir","auto")}))}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b);s.targets=["auto"]},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"emptyValue",value:function(t){this.fieldTarget.value=null}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b);s.targets=["field"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(10);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){var t=document.getElementById(this.data.get("id"));t&&r.a.waitUntilAppDefined(this._focus.bind(this),t)}},{key:"highlight",value:function(t){var e=t.target;this._highlight(e)}},{key:"scrollTo",value:function(t){var e=t.target;this._scrollTo(e)}},{key:"highlightTarget",value:function(t){document.getElementById(this.data.get("target")).focus()}},{key:"_clickElement",value:function(t){App.currentUser&&t.querySelector("[data-target='focus.clickElement']").click()}},{key:"_focus",value:function(t){this._highlight(t),this._scrollTo(t),this._clickElement(t)}},{key:"_highlight",value:function(t){t.classList.add("focus"),setTimeout((function(){t.classList.remove("focus")}),3e3)}},{key:"_scrollTo",value:function(t){var e=Math.round($(t).offset().top),n=document.getElementById("header").offsetHeight;window.scrollTo(0,e-n-30)}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var i=n(33),r=n.n(i),o=n(0),a=n(10);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,c(e).apply(this,arguments))}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),n=e,(i=[{key:"open",value:function(t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this._emptyContents(),this.modal.modal("show"),e.next=5,r.a.awrap(this._loadFirstItems(t.currentTarget.dataset.galleryPath));case 5:this._loadFirstItemsBefore();case 6:case"end":return e.stop()}}),null,this)}},{key:"next",value:function(t){t.preventDefault(),this.currentPosition=Math.min.apply(Math,[this._maximumPosition,this.currentPosition+1]),this._scrollToCurrentPosition(),this._showPreviousLink(),this.currentPosition==this._maximumPosition&&this._processFinalItem()}},{key:"previous",value:function(t){t.preventDefault(),this.currentPosition=Math.max.apply(Math,[this._minimumPosition,this.currentPosition-1]),this._scrollToCurrentPosition(),this._showNextLink(),this.currentPosition==this._minimumPosition&&this._processFirstItem()}},{key:"_emptyContents",value:function(){this._hideNextLink(),this._hidePreviousLink(),this.itemsContainerTarget.innerHTML="",this.currentPosition=0}},{key:"_loadFirstItems",value:function(t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(this._loadAfterCurrentItems(t));case 2:(this.itemTargets.length>1||this.afterPaginationLinks.next)&&this._showNextLink();case 3:case"end":return e.stop()}}),null,this)}},{key:"_loadFirstItemsBefore",value:function(){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.afterPaginationLinks.previous){t.next=4;break}return t.next=3,r.a.awrap(this._loadBeforeCurrentItems(this.afterPaginationLinks.previous.href));case 3:this._showPreviousLink();case 4:case"end":return t.stop()}}),null,this)}},{key:"_loadAfterCurrentItems",value:function(t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this._loading(!0),e.next=3,r.a.awrap(this._loadItems(t,this._loadAfterCurrentItemsCallback.bind(this)));case 3:this._loading(!1);case 4:case"end":return e.stop()}}),null,this)}},{key:"_loadBeforeCurrentItems",value:function(t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this._loading(!0),e.next=3,r.a.awrap(this._loadItems(t,this._loadBeforeCurrentItemsCallback.bind(this)));case 3:this._loading(!1);case 4:case"end":return e.stop()}}),null,this)}},{key:"_loadItems",value:function(t,e){return new Promise((function(n,i){Rails.ajax({type:"GET",url:t,dataType:"json",success:function(t){e(t),n()}})}))}},{key:"_loadAfterCurrentItemsCallback",value:function(t){this.afterPaginationLinks=t.meta.links,this._appendItems(t.html_items)}},{key:"_loadBeforeCurrentItemsCallback",value:function(t){this.beforePaginationLinks=t.meta.links,this._prependItems(t.html_items,t.meta.count)}},{key:"_appendItems",value:function(t){var e=this;t.forEach((function(t){a.a.appendHTML(e.itemsContainerTarget,t)}))}},{key:"_prependItems",value:function(t,e){var n=this;this.currentPosition+=e,t.reverse().forEach((function(t){a.a.prependHTML(n.itemsContainerTarget,t)})),this._scrollToCurrentPosition()}},{key:"_scrollToCurrentPosition",value:function(){this.itemsContainerTarget.scrollLeft=this.itemTargets[this.currentPosition].offsetLeft}},{key:"_loading",value:function(t){t?this.modal.loading({relative:!1,color:"#ffffff"}):this.modal.loading(!1)}},{key:"_processFinalItem",value:function(){this.afterPaginationLinks.next?this._loadAfterCurrentItems(this.afterPaginationLinks.next.href):this._hideNextLink()}},{key:"_processFirstItem",value:function(){this.beforePaginationLinks&&this.beforePaginationLinks.previous?this._loadBeforeCurrentItems(this.beforePaginationLinks.previous.href):this._hidePreviousLink()}},{key:"_hidePreviousLink",value:function(){this._setVisibility(this.previousTarget,"hidden")}},{key:"_hideNextLink",value:function(){this._setVisibility(this.nextTarget,"hidden")}},{key:"_showPreviousLink",value:function(){this._setVisibility(this.previousTarget,"visible")}},{key:"_showNextLink",value:function(){this._setVisibility(this.nextTarget,"visible")}},{key:"_setVisibility",value:function(t,e){t.style.visibility=e}},{key:"_maximumPosition",get:function(){return this.itemTargets.length-1}},{key:"_minimumPosition",get:function(){return 0}},{key:"modal",get:function(){return this._modal?this._modal:(this._modal=$(this.galleryTarget),this._modal)}}])&&s(n.prototype,i),o&&s(n,o),e}(o.b);f.targets=["gallery","itemsContainer","item","next","previous"]},function(t,e,n){var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(t,e,n,i){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),a=new k(i||[]);return o._invoke=function(t,e,n){var i=l;return function(r,o){if(i===h)throw new Error("Generator is already running");if(i===d){if("throw"===r)throw o;return j()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===l)throw i=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var u=c(t,e,n);if("normal"===u.type){if(i=n.done?d:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function m(){}function g(){}function v(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(E([])));_&&_!==n&&i.call(_,o)&&(y=_);var w=v.prototype=m.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function S(t){var e;this._invoke=function(n,r){function o(){return new Promise((function(e,o){!function e(n,r,o,a){var s=c(t[n],t,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(n,r,e,o)}))}return e=e?e.then(o,o):o()}}function T(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=c(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,p;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function E(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:j}}function j(){return{value:e,done:!0}}return g.prototype=w.constructor=v,v.constructor=g,v[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,i,r){var o=new S(u(e,n,i,r));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(w),w[s]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:E(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"connect",value:function(){this._addScrollListener()}},{key:"disconnect",value:function(){this._permanent||(this._loading=!1),this._removeScrollListener()}},{key:"start",value:function(t){t.preventDefault(),this._findNextPage(),this._hidePagination(),this._loadMore()}},{key:"_addScrollListener",value:function(){this._scrollHandler=Utils.throttle(this._scroll.bind(this)),this._viewport.addEventListener("scroll",this._scrollHandler)}},{key:"_removeScrollListener",value:function(){this._viewport.removeEventListener("scroll",this._scrollHandler)}},{key:"_scroll",value:function(){this._readyForMore&&this._pastThreshold&&this._loadMore()}},{key:"_loadMore",value:function(){var t=this;this._loading=!0,Rails.ajax({type:"GET",url:this._nextPage,success:function(e){t._pageLoadedHandler(e)}})}},{key:"_pageLoadedHandler",value:function(t){this._appendNewItems(t),this._findNextPage(t),this._loading=!1}},{key:"_appendNewItems",value:function(t){for(var e=t.getElementById(this._id).children;e.length>0;)this.containerTarget.appendChild(e[0])}},{key:"_findNextPage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element,e=t.querySelector("#".concat(this._paginationId," a[rel=next]"));this._nextPage=e&&e.href}},{key:"_hidePagination",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.paginationTarget.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)i.value.style.visibility="hidden"}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}},{key:"_nextPage",set:function(t){this.data.set("nextPage",t)},get:function(){var t=this.data.get("nextPage");return"null"==t&&(t=null),t}},{key:"_loading",set:function(t){$(this.paginationTarget).loading(t),this.data.set("loading",t)},get:function(){return"true"==this.data.get("loading")}},{key:"_readyForMore",get:function(){return this._nextPage&&!this._loading}},{key:"_id",get:function(){return this.containerTarget.id||alert("container needs a unique ID")}},{key:"_paginationId",get:function(){return this.paginationTarget.id||alert("pagination needs a unique ID")}},{key:"_viewport",get:function(){return document.getElementById(this._viewportId)||window}},{key:"_viewportId",get:function(){return this.data.get("viewportId")}},{key:"_buffer",get:function(){return this.data.get("buffer")||0}},{key:"_pastThreshold",get:function(){return this._currentScrollOffset>this._scrollThreshold}},{key:"_currentScrollOffset",get:function(){return window.scrollY+window.innerHeight}},{key:"_scrollThreshold",get:function(){return this._containerOffsetTop+this._containerHeight-this._buffer}},{key:"_containerOffsetTop",get:function(){return this.containerTarget.getBoundingClientRect().top+window.pageYOffset}},{key:"_containerHeight",get:function(){return this.containerTarget.getBoundingClientRect().height}},{key:"_permanent",get:function(){return this.data.get("permanent")}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b);s.targets=["container","pagination"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(10);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"showUrlIntercept",value:function(t){this.interceptedUrl=t.currentTarget.getAttribute("href"),t.preventDefault(),this._logEvent(),this._showOverlay(),this.urlInterceptTarget.classList.remove("app-banner-tray--hidden")}},{key:"dismiss",value:function(t){var e=this.data.get("cookie");t.preventDefault(),r.a.setCookie(e,"1"),this._redirectToInterceptedUrl()}},{key:"_showOverlay",value:function(){var t=this.data.get("container-id"),e=this.data.get("overlay-class");document.getElementById(t).classList.add(e)}},{key:"_redirectToInterceptedUrl",value:function(){this.interceptedUrl&&(window.location.href=this.interceptedUrl,this.interceptedUrl=null)}},{key:"_logEvent",value:function(){var t=this.data.get("url");$.ajax({type:"POST",url:t})}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b);c.targets=["urlIntercept"]},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"appendURLParams",value:function(t){var e=JSON.parse(this.data.get("params"));for(var n in e)e.hasOwnProperty(n)&&$(t.currentTarget).appendParam(n,e[n])}},{key:"appendSearchSuggestion",value:function(t){var e=this.data.get("suggestion-query"),n=this.data.get("suggestion-total-hits");$(t.currentTarget).appendParam("track_suggestion[query]",e),$(t.currentTarget).appendParam("track_suggestion[total_hits]",n)}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var i=n(0),r=n(400),o=n.n(r);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,u(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this.grid=this.element,this._createColumns(),this._initializeMasonry(),this._listenForNewItems(),this._showItems()}},{key:"disconnect",value:function(){this._stopListening(),this.colcade.destroy(!1)}},{key:"_createColumns",value:function(){for(var t=this.columnsToCreate;t>=1;t--)this.grid.innerHTML='<div class="'.concat("masonry__column"," ").concat("masonry__column","--").concat(t,'"></div>')+this.grid.innerHTML}},{key:"_initializeMasonry",value:function(){this.colcade=new o.a(this.grid,{columns:".".concat("masonry__column"),items:".".concat("masonry__item--new")})}},{key:"_listenForNewItems",value:function(){var t=this;this._mutationObserver=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.length>0&&t._addNewItems()}))})),this._mutationObserver.observe(this.grid,{childList:!0})}},{key:"_stopListening",value:function(){this._mutationObserver.disconnect()}},{key:"_showItems",value:function(){this.newItems.forEach((function(t){t.classList.remove("masonry__item--new")}))}},{key:"_addNewItems",value:function(){this.colcade.append(this.newItems),this._showItems()}},{key:"columnsToCreate",get:function(){return this.maxColumns-this.currentColumnCount}},{key:"maxColumns",get:function(){return this.data.get("columns")||4}},{key:"currentColumnCount",get:function(){return this.grid.querySelectorAll(".".concat("masonry__column")).length}},{key:"newItems",get:function(){return this.grid.querySelectorAll(".".concat("masonry__item--new"))}}])&&a(n.prototype,i),r&&a(n,r),e}(i.b)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"connect",value:function(){this._beforeCacheHandler=this._removeModal.bind(this),document.addEventListener("turbolinks:before-cache",this._beforeCacheHandler)}},{key:"disconnect",value:function(){document.removeEventListener("turbolinks:before-cache",this._beforeCacheHandler)}},{key:"_removeModal",value:function(){this._hideModal(),this._removeElement()}},{key:"_hideModal",value:function(){$(".".concat(this.modalFormClass)).modal("hide")}},{key:"_removeElement",value:function(){this.element.parentNode.removeChild(this.element)}},{key:"modalFormClass",get:function(){return this.data.get("class")}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var i=n(0),r=n(10);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this.cookie=this.data.get("cookie"),this.expires=parseInt(this.data.get("expires"))}},{key:"show",value:function(t){t.preventDefault(),this.modal.modal("show"),this.barTarget.classList.add("hidden")}},{key:"dismiss",value:function(t){t.preventDefault(),r.a.setCookie(this.cookie,"1",this.expires),this.modal.modal("hide"),this.barTarget.classList.remove("hidden")}},{key:"modal",get:function(){return this._modal?this._modal:(this._modal=$(this.modalTarget),this._modal)}}])&&o(n.prototype,i),c&&o(n,c),e}(i.b);c.targets=["bar","modal"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var i=n(0),r=n(45),o=n(10);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,l(e).apply(this,arguments))}var n,i,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this._limitVisibleReactions(),this._listenForReactionUpdates()}},{key:"disconnect",value:function(){this.reactionUpdateObserver&&this.reactionUpdateObserver.disconnect()}},{key:"openEmojiPicker",value:function(t){t.target.dispatchEvent(r.a.openEmojiPicker(this._onEmojiSelect.bind(this)))}},{key:"handleReactionSuccess",value:function(t){var e=s(t.detail,3),n=(e[0],e[1],e[2]),i=JSON.parse(n.response);this._insertOrUpdateReaction(i.html,i.emoji,i.status)}},{key:"_insertOrUpdateReaction",value:function(t,e,n){var i=this._reactionFor(e);i?this.updateCount(i,n):this._insertAtBeginning(t)}},{key:"_insertAtBeginning",value:function(t){this.element.firstElementChild.insertAdjacentHTML("beforebegin",t)}},{key:"_reactionFor",value:function(t){return this.reactionTargets.find((function(e){return e.dataset.emoji==t}))}},{key:"_onEmojiSelect",value:function(t){this.emojiFieldTarget.value=t,Rails.fire(this.formTarget,"submit")}},{key:"_listenForReactionUpdates",value:function(){this.reactionUpdateObserver=new MutationObserver(this._limitVisibleReactions.bind(this)),this.reactionUpdateObserver.observe(this.element,{attributes:!1,childList:!0,subtree:!1})}},{key:"_limitVisibleReactions",value:function(){var t=this.reactionTargets.length;if(t>0){var e=this.element.offsetWidth,n=parseInt(e/this.reactionWidth)*this.data.get("maxLines")-1,i=t>n,r=i?n-1:n,o=this.reactionTargets.slice(0,r),a=this.reactionTargets.slice(r);this._toggleVisibility(o,!0),this._toggleVisibility(a,!1),this._toggleVisibility([this.viewAllTarget],i)}}},{key:"_toggleVisibility",value:function(t,e){var n=this;t.forEach((function(t){e?t.classList.remove(n.hideClass):t.classList.add(n.hideClass)}))}},{key:"updateCount",value:function(t,e){var n=this.reactionTargets.indexOf(t),i=this.buttonTargets[n],r=this.countTargets[n];"created"==e?(this._incrementCount(r),this._setReactedState(i),o.a.isVisible(t)||this._moveReactionToBeginning(t)):"destroyed"==e&&(this._decrementCount(r,t),this._setUnreactedState(i))}},{key:"_moveReactionToBeginning",value:function(t){this.element.insertBefore(t,this.element.firstElementChild)}},{key:"_incrementCount",value:function(t){t.innerHTML=parseInt(t.innerText)+1}},{key:"_decrementCount",value:function(t,e){var n=parseInt(t.innerText)-1;n>0?t.innerHTML=n:e.remove()}},{key:"_setReactedState",value:function(t){t.className=this.data.get("reacted-class"),t.method="delete",t.insertAdjacentHTML("beforeend","<input name='_method' type='hidden' value='delete'>")}},{key:"_setUnreactedState",value:function(t){t.className=this.data.get("unreacted-class"),t.method="post",t.parentNode.querySelector("input[name='_method']").remove()}},{key:"hideClass",get:function(){return this.data.get("hideClass")}},{key:"reactionWidth",get:function(){var t=this.reactionTargets.map((function(t){return t.offsetWidth}));return Math.max.apply(Math,a(t))}}])&&u(n.prototype,i),h&&u(n,h),e}(i.b);h.targets=["form","emojiField","reaction","button","count","viewAll"]},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"connect",value:function(){var t=this;setTimeout((function(){window.location=t.linkTarget.getAttribute("href")}),1e3)}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b);s.targets=["link"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var i=n(0),r=n(10),o=n(45);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,u(e).apply(this,arguments))}var n,i,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"appendNewComment",value:function(t){this._insertComment(this._extractComment(t))}},{key:"_insertComment",value:function(t){r.a.appendHTML(this.commentsTarget,t),this.latestComment.dispatchEvent(o.a.commentAdded)}},{key:"_extractComment",value:function(t){return t.detail[0].html}},{key:"latestComment",get:function(){return this.commentTargets.slice(-1)[0]}}])&&a(n.prototype,i),l&&a(n,l),e}(i.b);l.targets=["comments","comment"]},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"appendSearchTerm",value:function(t){var e=this.data.get("term");$(t.currentTarget).appendParam("search_term",e)}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"connect",value:function(){this._isJoinContestsSlider()?this._sliderJoinContests():this._sliderHomepage()}},{key:"disconnect",value:function(){this._clearOutClones()}},{key:"_sliderHomepage",value:function(){var t=Browser.mobile?"slide":"fade",e=this._hasManySlides()?3e3:7e3;$(this.element).flexslider({selector:this._slidesSelector(),prevText:"",nextText:"",animation:t,directionNav:this._showNavigationArrows(),touch:this._isSlideshow(),randomize:this._hasManySlides(),slideshowSpeed:e})}},{key:"_sliderJoinContests",value:function(){var t=this._isSlideshow()?10:0,e=this._isSlideshow()?10:0,n=$(this.element).width()-t-e;$(this.element).flexslider({selector:this._slidesSelector(),prevText:"",nextText:"",animation:"slide",directionNav:this._showNavigationArrows(),touch:this._isSlideshow(),randomize:this._hasManySlides(),rtl:this._isRTL(),slideshowSpeed:5e3,animationSpeed:300,itemWidth:n,itemMargin:t})}},{key:"_isJoinContestsSlider",value:function(){return this.data.has("joinContests")}},{key:"_slidesSelector",value:function(){return this._isJoinContestsSlider()?"[data-slides] [data-slide]":Browser.mobile?"[data-slides] [data-slide-mobile]":"[data-slides] [data-slide-desktop]"}},{key:"_numSlides",value:function(){return $(this._slidesSelector()).length}},{key:"_isSlideshow",value:function(){return this._numSlides()>1}},{key:"_hasManySlides",value:function(){return this._numSlides()>=7}},{key:"_showNavigationArrows",value:function(){return!Browser.mobile}},{key:"_isRTL",value:function(){return"rtl"===$("html").attr("dir")}},{key:"_clearOutClones",value:function(){$(this.element).find("[data-slides] .clone").remove()}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"appendParam",value:function(t){var e=this.data.get("via");e&&$(t.currentTarget).appendParam("via",e)}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"delete",value:function(t){var e=this;t.preventDefault(),$(":focus").blur(),Utils.delay(1,(function(){e.shouldDisplayPrompt&&!confirm(e.message)||$(e.record).trigger("record:delete")}))}},{key:"shouldDisplayPrompt",get:function(){return this.description||this.imageId}},{key:"record",get:function(){return this.recordTarget}},{key:"description",get:function(){return this.descriptionTarget.querySelector("textarea").value}},{key:"imageId",get:function(){return this.imageTarget.id}},{key:"message",get:function(){return this.data.get("message")}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b);s.targets=["description","image","record"]},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"focus",value:function(){this.submitTarget.classList.add(this.data.get("focusClass"))}},{key:"focusout",value:function(){this.submitTarget.classList.remove(this.data.get("focusClass"))}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b);s.targets=["submit"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var i=n(0);n(10);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,a(e).apply(this,arguments))}var n,i,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this._hideOverflowingTabs()}},{key:"switchTab",value:function(t){var e=t.currentTarget;t.preventDefault(),this._deactivateTabs(),this._activateTab(e),this.hasOverflownTab&&this._repositionTabs(e)}},{key:"_deactivateTabs",value:function(){var t=this;this.itemTargets.forEach((function(e){t._deactivate(e,t.itemActiveClass)})),this.bodyTargets.forEach((function(e){t._deactivate(e,t.bodyActiveClass)}))}},{key:"_activateTab",value:function(t){var e=this._bodyFor(t);this._activate(t,this.itemActiveClass),this._activate(e,this.bodyActiveClass)}},{key:"_bodyFor",value:function(t){return this.bodyTargets[t.dataset.tabIndex]}},{key:"_deactivate",value:function(t,e){t.classList.remove(e)}},{key:"_activate",value:function(t,e){t.classList.add(e)}},{key:"_repositionTabs",value:function(t){var e=this._nextItem(t),n=this._previousItem(t);e&&this._isOverFlowingRight(e)?this._scrollIntoView(e):this._isOverFlowingRight(t)?this._scrollIntoView(t):n&&this._isOverFlowingLeft(n)?this._scrollIntoView(n):this._isOverFlowingLeft(t)&&this._scrollIntoView(t)}},{key:"_nextItem",value:function(t){return this.itemTargets[parseInt(t.dataset.tabIndex)+1]}},{key:"_previousItem",value:function(t){return this.itemTargets[parseInt(t.dataset.tabIndex)-1]}},{key:"_isOverFlowingRight",value:function(t){return t.getBoundingClientRect().right>this.itemContainerRight}},{key:"_isOverFlowingLeft",value:function(t){return t.getBoundingClientRect().left<this.itemContainerLeft}},{key:"_scrollIntoView",value:function(t){t.scrollIntoView({behavior:"smooth",block:"end"})}},{key:"_hideOverflowingTabs",value:function(){this.itemContainerTarget.style.whiteSpace="nowrap",this.itemContainerTarget.style.overflowX="scroll"}},{key:"itemContainerRight",get:function(){return this.itemContainerTarget.getBoundingClientRect().right}},{key:"itemContainerLeft",get:function(){return this.itemContainerTarget.getBoundingClientRect().left}},{key:"hasOverflownTab",get:function(){var t=this.itemContainerTarget;return t.scrollWidth>t.clientWidth}},{key:"itemActiveClass",get:function(){return this.data.get("itemActiveClass")}},{key:"bodyActiveClass",get:function(){return this.data.get("bodyActiveClass")}}])&&r(n.prototype,i),u&&r(n,u),e}(i.b);u.targets=["item","body","itemContainer"]},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"updateToastHtml",value:function(t){this.element.innerHTML=t.detail.toastMessageHtml}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var i=n(0);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,a(e).apply(this,arguments))}var n,i,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){var t=this.element;setTimeout((function(){t.classList.add("toast--show")}),100),setTimeout((function(){t.classList.remove("toast--show")}),4e3)}}])&&r(n.prototype,i),u&&r(n,u),e}(i.b)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),n.d(e,"default",(function(){return s}));var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,o(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(s=[{key:"toggle",value:function(){var t=this,e=$(this.element);this.element.dataset.toggleConfirmed=!1;var n=this.data.get("class");e.toggleClass(n),e.one("ajax:error",(function(){e.toggleClass(n)})),e.one("ajax:success",(function(){t.element.dataset.toggleConfirmed=!0}))}}])&&i(n.prototype,s),u&&i(n,u),e}(n(0).b)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var i=n(0),r=n(401),o=n.n(r);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,u(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this._initHeadroom()}},{key:"_initHeadroom",value:function(){new o.a(this.tray,{tolerance:10,classes:{unpinned:"cookplan-tray--unpinned"}}).init()}},{key:"tray",get:function(){return this.element}}])&&a(n.prototype,i),r&&a(n,r),e}(i.b)},function(t,e){!function(t){t.fn.appendParam=function(e,n){return this.each((function(){var i=t(this).closest("a, form"),r="href";i.is("form")&&(r="action");var o=function(t,e,n){var i="";match=t.match(/(.+)(#\w+)/),match&&(t=match[1],i=match[2]);var r=new RegExp("([?&])"+e+"=.*?(&|$)","i");return separator=-1!==t.indexOf("?")?"&":"?",t.match(r)?t.replace(r,"$1"+e+"="+n+"$2"):t+separator+e+"="+n+i}(i.attr(r),e,n);return i.attr(r,o)}))}}(jQuery)},function(t,e){$.fn.extend({autosize:function(){return autosize(this),autosize.update(this),this}})},function(t,e){var n;$.fn.extend({highlightWords:function(t){return this.each((function(){return new n(this,t).apply()}))}}),n=function(){var t,e;function n(e,n){var i;this.container=e,this.wordsToHighlight=n.wordsToHighlight,this.connector=n.connector,i=n.htmlClass,this.wrapper='<span class="'+i+'">$&</span>',this.regex=new RegExp(t+"("+this.wordsToHighlight+")"+t,"ig")}return 8,t="[^$#@:()!Â¡Â¿?`*\\_;,./\\sØŒ+]*",e="highlightable-words",n.prototype.apply=function(){var t;if(this.wordsToHighlight)return $(this.container).find("[data-"+e+"]").each((t=this,function(n,i){var r;return r=$(i).data(e),r=t._sortHighlightedToFront(r),r=t._summarize(r),r=t._addStyling(r),$(i).html(r),$(i).removeAttr("data-"+e)}))},n.prototype._sortHighlightedToFront=function(t){return t.concat().sort((e=this,function(t,n){var i;return i=t.match(e.regex)||[],(n.match(e.regex)||[]).length-i.length}));var e},n.prototype._summarize=function(t){return t.slice(0,8).join(this.connector)},n.prototype._addStyling=function(t){return t.replace(this.regex,this.wrapper)},n}()},function(t,e){$.fn.extend({setCaret:function(t){var e,n,i,r;return null==t&&(t=!0),this.attr("contenteditable")?((n=this.editableRange()).collapse(t),(r=window.getSelection()).removeAllRanges(),r.addRange(n)):(null!=(i=this[0])?i.setSelectionRange:void 0)&&(e=t?0:this.val().length,this[0].setSelectionRange(e,e)),this},editableCaretAtStart:function(){return 0===this.editableTextBeforeCursor().length},editableTextBeforeCursor:function(){var t,e;return e=this.editableRange(),t=this.editableCaret(),e.setEnd(t.startContainer,t.startOffset),e.toString().trim()},editableCaretAtEnd:function(){return 0===this.editableTextAfterCursor().length},editableTextAfterCursor:function(){var t,e;return e=this.editableRange(),t=this.editableCaret(),e.setStart(t.endContainer,t.endOffset),e.toString().trim()},editableCaret:function(){return window.getSelection().getRangeAt(0)},editableRange:function(){var t;return(t=document.createRange()).selectNodeContents(this[0]),t}})},function(t,e){$.fn.extend({loading:function(t){var e;return null==t&&(t={}),e={spinner:!0,relative:!0,radius:8,length:3,width:2,speed:2,zIndex:1,color:$(this).css("color")},e=$.extend(e,t),this.each((function(){if(t){if($(this).addClass("loading"),e.relative&&$(this).css({position:"relative"}),e.spinner)return $(this).spin(e)}else if($(this).removeClass("loading").spin(!1),e.relative)return $(this).css({position:""})}))}})},function(t,e){$.fn.extend({state:function(t){return arguments.length?this.each((function(){var e,n,i,r;if((e=(r=$(this).closest("[data-stateful]")).data("stateful"))&&(r=$("[data-stateful="+e+"]")),i=r.data("stateful-current"),r.data("stateful-current",t),r.attr("data-stateful-current",t),r.children("[data-state]").hide(),(n=r.children("[data-state~="+t+"]")).show(),n.find("form").trigger("reset"),n.find("input[type=text], textarea").first().focus(),t!==i)return r.trigger({type:"state:change",state:t})})):this.data("stateful-current")}}),$(document).on("click","[data-behavior~=set_state]",(function(t){return t.preventDefault(),$(this).state($(this).data("new-state"))})),$(document).on("page:show",(function(){return $("[data-stateful-current]").each((function(){var t;if(t=$(this).data("stateful-current"))return $(this).state(t)}))}))},function(t,e){var n;(n=jQuery).fn.extend({syncInput:function(t){return this.each((function(){var e,i;return e=n(this),i=function(){return t.call(e)},e.bind("input",(function(){return i()})),i()}))}})},function(t,e){$.fn.extend({truncate:function(t){return null==t&&(t={}),1.9,this.each((function(){var e,n,i,r,o,a,s,u,c,l,f,h;if((e=$(this)).css({display:"block"}),s=parseFloat(e.css("font-size")),i=e.width()/s*1.9,n=(n=t.lines*i)-t.ellipsis.length-t.more.length,f=$(this).find("p, br").length,u=n-Math.max(0,f-t.lines)*i,e.text().length>u){for(h in c={},e.find("a").each((function(){return c[this.innerText]={text:this.innerText,href:this.href,className:this.className}})),e.data("original",e.html()),e.text(e.text().trim().slice(0,n)),e.append(t.ellipsis),c)r=c[h],o=h.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),a="<a href='"+r.href+"' target='_blank' ref='nofollow' class='"+r.className+"'>"+h+"</a>",e.html(e.html().replace(new RegExp(o,"g"),a));if(t.more.length>0)return(l=$("<a class='more-link hidden-print' href='#'>"+t.more+"</a>")).appendTo(e),l.one("click",(function(){var t,n;return n=e.outerHeight(),e.html(e.data("original")),t=e.outerHeight(),e.css("height",n),e.animate({height:t},100,(function(){return e.css("height","auto")})),!1}))}}))}})},function(t,e){var n;window.Notifier=function(){function t(t){var e;this.selector=t,this.titleTag=new n,$(document).on("DOMContentLoaded",(e=this,function(){return e.fetchCount()})),$(document).on("turbolinks:load",function(t){return function(){return t.updateView()}}(this))}return"55000",t.prototype.fetchCount=function(){var t,e;return(t=$(this.selector).data("count-url"))&&$.get(t,(e=this,function(t){return e.setCount(t)})),Utils.delay("55000",function(t){return function(){return t.fetchCount()}}(this))},t.prototype.setCount=function(t){return this.num=t,this.updateView()},t.prototype.updateView=function(){return this.num>0?($(this.selector).text(this.num),this.titleTag.prependCount(this.num)):($(this.selector).text(""),this.titleTag.reset())},t}(),n=function(){function t(){}return t.prototype.prependCount=function(t){return this.originalTitle()||this.cacheOriginalTitle(),$("title").text("("+t+") "+this.originalTitle())},t.prototype.reset=function(){return $("title").text(this.originalTitle())},t.prototype.cacheOriginalTitle=function(){return $("title").attr("data-original-title",$("title").text())},t.prototype.originalTitle=function(){return $("title").attr("data-original-title")},t}()},function(t,e){window.Utils=function(){function t(){}return t.delay=function(t,e){return setTimeout(e,t)},t.throttle=function(t,e){return $.isFunction(t)&&(e=t,t=250),$.throttle(t,e)},t.submit=function(t){return t.data("remote")?Rails.fire(t[0],"submit"):t.submit()},t}()},function(t,e,n){t.exports=n(44),n(133),n(72),n(523),n(134),n(524),n(525)},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"use strict";"object"===e(t)&&t.exports?i(n(44),n(72)):i(window.loadImage)}((function(t){"use strict";"fetch"in window&&"Request"in window&&(t.fetchBlob=function(e,n,i){if(t.hasMetaOption(i))return fetch(new Request(e,i)).then((function(t){return t.blob()})).then(n).catch((function(t){console.log(t),n()}));n()})}))}).call(this,n(15)(t))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"use strict";"object"===e(t)&&t.exports?i(n(44),n(134)):i(window.loadImage)}((function(t){"use strict";t.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},t.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},function(t){var e,n=t.tags,i=t.map;for(e in n)n.hasOwnProperty(e)&&(i[n[e]]=e)}(t.ExifMap.prototype),t.ExifMap.prototype.getAll=function(){var t,e,n={};for(t in this)this.hasOwnProperty(t)&&(e=this.tags[t])&&(n[e]=this.getText(e));return n}}))}).call(this,n(15)(t))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"use strict";"object"===e(t)&&t.exports?i(n(44),n(133),n(72)):i(window.loadImage)}((function(t){"use strict";var e=t.hasCanvasOption,n=t.hasMetaOption,i=t.transformCoordinates,r=t.getTransformedOptions;t.hasCanvasOption=function(n){return!!n.orientation||e.call(t,n)},t.hasMetaOption=function(e){return e&&!0===e.orientation||n.call(t,e)},t.transformCoordinates=function(e,n){i.call(t,e,n);var r=e.getContext("2d"),o=e.width,a=e.height,s=e.style.width,u=e.style.height,c=n.orientation;if(c&&!(c>8))switch(c>4&&(e.width=a,e.height=o,e.style.width=u,e.style.height=s),c){case 2:r.translate(o,0),r.scale(-1,1);break;case 3:r.translate(o,a),r.rotate(Math.PI);break;case 4:r.translate(0,a),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-a);break;case 7:r.rotate(.5*Math.PI),r.translate(o,-a),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-o,0)}},t.getTransformedOptions=function(e,n,i){var o,a,s=r.call(t,e,n),u=s.orientation;if(!0===u&&i&&i.exif&&(u=i.exif.get("Orientation")),!u||u>8||1===u)return s;for(a in o={},s)s.hasOwnProperty(a)&&(o[a]=s[a]);switch(o.orientation=u,u){case 2:o.left=s.right,o.right=s.left;break;case 3:o.left=s.right,o.top=s.bottom,o.right=s.left,o.bottom=s.top;break;case 4:o.top=s.bottom,o.bottom=s.top;break;case 5:o.left=s.top,o.top=s.left,o.right=s.bottom,o.bottom=s.right;break;case 6:o.left=s.top,o.top=s.right,o.right=s.bottom,o.bottom=s.left;break;case 7:o.left=s.bottom,o.top=s.right,o.right=s.top,o.bottom=s.left;break;case 8:o.left=s.bottom,o.top=s.left,o.right=s.top,o.bottom=s.right}return o.orientation>4&&(o.maxWidth=s.maxHeight,o.maxHeight=s.maxWidth,o.minWidth=s.minHeight,o.minHeight=s.minWidth,o.sourceWidth=s.sourceHeight,o.sourceHeight=s.sourceWidth),o}}))}).call(this,n(15)(t))},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;
/*! jQuery UI - v1.12.1+CommonJS - 2018-02-10
 * http://jqueryui.com
 * Includes: widget.js
 * Copyright jQuery Foundation and other contributors; Licensed MIT */r=function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e,n=0,i=Array.prototype.slice;
/*!
   * jQuery UI Widget 1.12.1
   * http://jqueryui.com
   *
   * Copyright jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */t.cleanData=(e=t.cleanData,function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{(i=t._data(r,"events"))&&i.remove&&t(r).triggerHandler("remove")}catch(t){}e(n)}),t.widget=function(e,n,i){var r,o,a,s={},u=e.split(".")[0],c=u+"-"+(e=e.split(".")[1]);return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[u]=t[u]||{},r=t[u][e],o=t[u][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),(a=new n).options=t.widget.extend({},a.options),t.each(i,(function(e,i){t.isFunction(i)?s[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function r(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}():s[e]=i})),o.prototype=t.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||e},s,{constructor:o,namespace:u,widgetName:e,widgetFullName:c}),r?(t.each(r._childConstructors,(function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,r,o=i.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])r=o[a][n],o[a].hasOwnProperty(n)&&void 0!==r&&(t.isPlainObject(r)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],r):t.widget.extend({},r):e[n]=r);return e},t.widget.bridge=function(e,n){var r=n.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=i.call(arguments,1),u=this;return a?this.length||"instance"!==o?this.each((function(){var n,i=t.data(this,r);return"instance"===o?(u=i,!1):i?t.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s))!==i&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):u=void 0:(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each((function(){var e=t.data(this,r);e?(e.option(o||{}),e._init&&e._init()):t.data(this,r,new n(o,this))}))),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,n){e._removeClass(n,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,r;for(n in e)r=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&r&&r.length&&(i=t(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var n=[],i=this;function r(r,o){var a,s;for(s=0;s<r.length;s++)a=i.classesElementLookup[r[s]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),i.classesElementLookup[r[s]]=a,n.push(r[s]),o&&e.classes[r[s]]&&n.push(e.classes[r[s]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,(function(i,r){-1!==t.inArray(e.target,r)&&(n.classesElementLookup[i]=t(r.not(e.target).get()))}))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,o={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,(function(i,a){function s(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var u=i.match(/^([\w:-]*)\s*(.*)$/),c=u[1]+o.eventNamespace,l=u[2];l?r.on(c,l,s):n.on(c,s)}))},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var n=this;return setTimeout((function(){return("string"==typeof t?n[t]:t).apply(n,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){var a;"string"==typeof r&&(r={effect:r});var s=r?!0===r||"number"==typeof r?n:r.effect||n:e;"number"==typeof(r=r||{})&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue((function(n){t(this)[e](),o&&o.call(i[0]),n()}))}})),t.widget},"object"===i(e)?r(n(16)):r(jQuery)},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";"object"===i(e)?t(n(16),n(44),n(72),n(133),n(134),n(396),n(135)):t(window.jQuery,window.loadImage)}((function(t,e){"use strict";t.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(n,i){if(i.disabled)return n;var r=this,o=n.files[n.index],a=t.Deferred();return"number"===t.type(i.maxFileSize)&&o.size>i.maxFileSize||i.fileTypes&&!i.fileTypes.test(o.type)||!e(o,(function(t){t.src&&(n.img=t),a.resolveWith(r,[n])}),i)?n:a.promise()},resizeImage:function(n,i){if(i.disabled||!n.canvas&&!n.img)return n;i=t.extend({canvas:!0},i);var r,o=this,a=t.Deferred(),s=i.canvas&&n.canvas||n.img,u=function(t){t&&(t.width!==s.width||t.height!==s.height||i.forceResize)&&(n[t.getContext?"canvas":"img"]=t),n.preview=t,a.resolveWith(o,[n])};if(n.exif){if(!0===i.orientation&&(i.orientation=n.exif.get("Orientation")),i.thumbnail&&(r=n.exif.get("Thumbnail")))return e(r,u,i),a.promise();n.orientation?delete i.orientation:n.orientation=i.orientation}return s?(u(e.scale(s,i)),a.promise()):n},saveImage:function(e,n){if(!e.canvas||n.disabled)return e;var i=this,r=e.files[e.index],o=t.Deferred();return e.canvas.toBlob?(e.canvas.toBlob((function(t){t.name||(r.type===t.type?t.name=r.name:r.name&&(t.name=r.name.replace(/\.\w+$/,"."+t.type.substr(6)))),r.type!==t.type&&delete e.imageHead,e.files[e.index]=t,o.resolveWith(i,[e])}),n.type||r.type,n.quality),o.promise()):e},loadImageMetaData:function(n,i){if(i.disabled)return n;var r=this,o=t.Deferred();return e.parseMetaData(n.files[n.index],(function(e){t.extend(n,e),o.resolveWith(r,[n])}),i),o.promise()},saveImageMetaData:function(t,e){if(!(t.imageHead&&t.canvas&&t.canvas.toBlob)||e.disabled)return t;var n=t.files[t.index],i=new Blob([t.imageHead,this._blobSlice.call(n,20)],{type:n.type});return i.name=n.name,t.files[t.index]=i,t},setImage:function(t,e){return t.preview&&!e.disabled&&(t.files[t.index][e.name||"preview"]=t.preview),t},deleteImageReferences:function(t,e){return e.disabled||(delete t.img,delete t.canvas,delete t.preview,delete t.imageHead),t}}})}))},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";"object"===i(e)?t(n(16),n(135)):t(window.jQuery)}((function(t){"use strict";t.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{getNumberOfFiles:t.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,n){if(n.disabled)return e;var i,r=t.Deferred(),o=this.options,a=e.files[e.index];return(n.minFileSize||n.maxFileSize)&&(i=a.size),"number"===t.type(n.maxNumberOfFiles)&&(o.getNumberOfFiles()||0)+e.files.length>n.maxNumberOfFiles?a.error=o.i18n("maxNumberOfFiles"):!n.acceptFileTypes||n.acceptFileTypes.test(a.type)||n.acceptFileTypes.test(a.name)?i>n.maxFileSize?a.error=o.i18n("maxFileSize"):"number"===t.type(i)&&i<n.minFileSize?a.error=o.i18n("minFileSize"):delete a.error:a.error=o.i18n("acceptFileTypes"),a.error||e.files.error?(e.files.error=!0,r.rejectWith(this,[e])):r.resolveWith(this,[e]),r.promise()}}})}))},function(t,e){(function(t){t.ui.focusable=function(e,n){var i,r,o,a,s,u=e.nodeName.toLowerCase();return"area"===u?(r=(i=e.parentNode).name,!(!e.href||!r||"map"!==i.nodeName.toLowerCase())&&(o=t("img[usemap='#"+r+"']")).length>0&&o.is(":visible")):(/^(input|select|textarea|button|object)$/.test(u)?(a=!e.disabled)&&(s=t(e).closest("fieldset")[0])&&(a=!s.disabled):a="a"===u&&e.href||n,a&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(t(e)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable})(jQuery)},function(t,e){
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011â€“2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,n=t.ui.mouse.prototype,i=n._mouseInit,r=n._mouseDestroy;n._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,o(t,"mouseover"),o(t,"mousemove"),o(t,"mousedown"))},n._touchMove=function(t){e&&(this._touchMoved=!0,o(t,"mousemove"))},n._touchEnd=function(t){e&&(o(t,"mouseup"),o(t,"mouseout"),this._touchMoved||o(t,"click"),e=!1)},n._mouseInit=function(){this.element.bind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),i.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),r.call(this)}}function o(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}}(jQuery)},function(t,e){(function(t){t.extend(t.expr[":"],{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}})})(jQuery)},function(t,e){$(document).on("click","[data-behavior~=reset_search]",(function(t){return $(this).closest("form").find("input").val(""),$($(this).data("results")).empty(),t.preventDefault()})),$(document).on("ajax:success","[data-behavior~=paginator]",(function(){return $(this).parent().remove()})),$(document).on("change","[data-behavior~=refresh_on_change]",(function(t){var e,n,i;return null!=(e=$(this).data("xhr"))&&e.abort(),n=$(this).data("target"),$(n).loading({position:"absolute",top:"50%",left:"50%"}),i=$.get($(this).attr("action"),$(this).serialize(),(function(t){return $(n).replaceWith($(t).find(n))})),$(this).data("xhr",i)}))},function(t,e){Turbolinks.supported?$(document).on("turbolinks:load",(function(){return $(this).trigger("page:show")})):$(document).on("DOMContentLoaded",(function(){return $(this).trigger("page:show")})),$(document).on("DOMContentLoaded page:show",(function(){return window.App=$("body").data("app")})),$(document).on("page:show ajax:success",(function(){if(App.currentUser&&$("[data-visible-to="+App.currentUser+"]").removeAttr("data-visible-to"),App.currentUser&&$("[data-hidden-from="+App.currentUser+"]").remove(),!App.currentUser)return $("[data-hidden-from-guest]").remove()})),$(document).on("page:show",(function(){return $("[data-current]").each((function(){return $(this).find("[href='"+location.pathname+"']").parent().addClass($(this).data("current"))})),$("[data-editable-by="+App.currentUser+"] [data-clamp]").removeAttr("data-clamp"),$("[data-clamp]").each((function(){return $(this).truncate({lines:$(this).data("clamp"),more:$(this).data("clamp-more")||"",ellipsis:"..."}),$(this).removeAttr("data-clamp")}))}))},function(t,e){$(document).on("click","[data-behavior=set_country]",(function(){return Cookies.set("country_code",$(this).data("country"),{expires:30})}))},function(t,e){window.DomElement=function(){function t(t){this.elem=$(t)}return t.prototype.trigger=function(t,e){var n;return(n=$.Event(e)).type=t,this.elem.trigger(n,this)},t.prototype.setSavedStatus=function(t){return this.elem.toggleClass("editor__unsaved",!t)},t.prototype.unsavedElements=function(){return this.elem.find(".editor__unsaved:visible")},t}()},function(t,e){window.IEContenteditable=function(){function t(t){var e;this.elem=t,this.wrapSpans(),this.elem.on("field:rendered",(e=this,function(){return e.wrapSpans()})),this.elem.on("field:focusing",function(t){return function(){return t.unwrapSpans()}}(this))}return t.prototype.wrapSpans=function(){return this.elem.find("span").attr("contenteditable",!1).wrapInner('<span contenteditable="true" />')},t.prototype.unwrapSpans=function(){if(this.elem.find("[contenteditable]").length)return this.elem.html(this.elem.text().trim())},t}()},function(t,e){window.RecordIdentifier=function(){function t(t){this.elem=t}return t.prototype.name=function(){return this.isNew()?this.parts(-1):this.parts(-2)},t.prototype.id=function(){return this.isNew()?"":this.parts(-1)},t.prototype.updateId=function(t){return this.elem.attr("id",this.name()+"_"+t)},t.prototype.isNew=function(){return isNaN(this.parts(-1))},t.prototype.hasId=function(){return!this.isNew()},t.prototype.parts=function(t){return this.elem.attr("id").split("_").slice(t)[0]},t}()},function(t,e){var n={}.hasOwnProperty;window.RecordList=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.blueprint=this.elem.data("record-list"),this.elem.on("recordList:append",(t=this,function(){return t.addRecordAfter(t.elem.children().last())})),this.elem.on("record:persisted",function(t){return function(){return t.savePositions()}}(this)),this.elem.on("sortupdate",function(t){return function(){return t.savePositions()}}(this)),this.elem.on("field:keydown",function(t){return function(e,n){return t.onKeydown(e.originalEvent,n)&&e.preventDefault()&&e.stopPropagation()}}(this)),this.elem.on("textField:paste",function(t){return function(e,n){return t.onPaste(n)}}(this))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,DomElement),e.prototype.SELECTOR="[data-record-list]",e.prototype.addRecordAfter=function(t){var e;return(e=new UnpersistedRecord(this.blueprint)).insertAfter(t),e},e.prototype.savePositions=function(){var t;return null!=(t=this.sortRequest)&&t.abort(),this.sortRequest=$.ajax({type:"PUT",url:this.elem.data("sort-url"),data:this.elem.sortable("serialize")})},e.prototype.onKeydown=function(t,e){if(!t.shiftKey)switch(t.which){case $.ui.keyCode.ENTER:return this.splitField(e);case $.ui.keyCode.BACKSPACE:if(e.isEmpty())return e.trigger("record:delete");break;case $.ui.keyCode.DELETE:if(e.isEmpty())return e.trigger("record:delete")}},e.prototype.splitField=function(t){var e,n,i;return e=t.editableTextAfterCursor(),n=t.editableTextBeforeCursor(),i=this.addRecordAfter(t.elem),t.setValue(n),i.fields[0].value(e)},e.prototype.onPaste=function(t){var e,n;if(e=t.value().split("\n"),t.value(e.shift()),e.length>0)return(n=this.addRecordAfter(t.elem).fields[0]).value(e.join("\n")),this.onPaste(n)},e}()},function(t,e){var n={}.hasOwnProperty;window.Record=function(t){function e(){var t,n,i,r,o;for(e.__super__.constructor.apply(this,arguments),this.baseUrl=this.parseUrl(this.elem.data("record")),this.identifier=new RecordIdentifier(this.elem),this.fields=[],this.elem.find(FieldGroup.prototype.SELECTOR).each((function(){return new FieldGroup(this)})),n=0,i=(r=[TextField,TextAreaField,ImageField]).length;n<i;n++)t=r[n],this.elem.find(t.prototype.SELECTOR).each(function(e){return function(n,i){return e.fields.push(new t(i))}}(this));this.elem.on("field:save",(o=this,function(t,e){return o.update(e)})),this.elem.on("record:delete",function(t){return function(){return t.delete()}}(this))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,DomElement),e.prototype.SELECTOR="[data-record]",e.prototype.update=function(t){var e,n,i;return i=t.value(),this.ajax("PUT",{data:(e={},e[""+this.identifier.name()]=(n={},n[""+t.name]=i,n),e),success:function(e){return t.render(i,e)},error:function(){return t.setSavedStatus(!1)}})},e.prototype.delete=function(){if(!this.lastRemaining())return this.typing()&&this.focusAdjacent(),this.trash(),this.destroy()},e.prototype.lastRemaining=function(){return 0===this.elem.siblings().length},e.prototype.typing=function(){return this.elem.find(":focus").is(":input, [data-field]")},e.prototype.focusAdjacent=function(){return this.elem.is(":first-child")?this.trigger("editor:next"):this.trigger("editor:previous")},e.prototype.trash=function(){return this.elem.html("").hide().appendTo(this.elem.closest(Editor.prototype.SELECTOR))},e.prototype.destroy=function(){return this.ajax("DELETE")},e.prototype.ajax=function(t,e){return null==e&&(e={}),this.trigger("record:ajaxStart"),$.ajax($.extend(e,{method:t,url:this.getUrl(),complete:(n=this,function(){return n.trigger("record:ajaxComplete")})}));var n},e.prototype.getUrl=function(){var t;return"/"!==(t=this.baseUrl.pathname+"/"+this.identifier.id()+this.baseUrl.search)[0]&&(t="/"+t),t},e.prototype.parseUrl=function(t){var e;return(e=document.createElement("a")).href=t,e},e}()},function(t,e){var n={}.hasOwnProperty;window.UnpersistedRecord=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Record),e.prototype.insertAfter=function(t){var e;return this.elem.insertAfter($(t).closest(this.SELECTOR)),this.elem.find(InputField.prototype.SELECTOR).focus(),this.elem.on("element:resave",(e=this,function(){return e.persist()})),this.persist()},e.prototype.persist=function(){var t;if(!this.persisted())return this.ajax("POST",{data:{timestamp:(new Date).getTime()},success:(t=this,function(e){return t.identifier.updateId(e),t.setSavedStatus(!0),t.trigger("record:persisted")}),error:function(t){return function(){return t.setSavedStatus(!1)}}(this)})},e.prototype.persisted=function(){return this.identifier.hasId()},e.prototype.update=function(t){return this.waitForId(t.name,(n=this,function(){return e.__super__.update.call(n,t)}));var n},e.prototype.destroy=function(){return this.elem.off("record:persisted"),this.waitForId("destroy",(t=this,function(){return e.__super__.destroy.apply(t,arguments)}));var t},e.prototype.waitForId=function(t,e){return this.persisted()?e.call():(this.elem.off("record:persisted."+t),this.elem.on("record:persisted."+t,(function(){return e.call()})))},e}()},function(t,e){var n={}.hasOwnProperty;window.Field=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.name=this.elem.data("field-name"),this.elem.on("element:resave",(t=this,function(){return t.save()})),this.elem.closest("[data-field-group]").length||new FieldGroup(this.elem)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,DomElement),e.prototype.save=function(){return this.trigger("field:save")},e.prototype.value=function(t){return arguments.length?this.setValue(t):this.getValue()},e.prototype.setValue=function(){throw new Error("setValue() not yet implemented")},e.prototype.getValue=function(){throw new Error("getValue() not yet implemented")},e.prototype.render=function(t,e){if(this.value()===t&&!this.isFocused())return this.setSavedStatus(!0),this.elem.html(this.findSelf(e)),this.trigger("field:rendered")},e.prototype.isFocused=function(){return this.elem.is(":focus")},e.prototype.findSelf=function(t){return $(t).find("[data-field-name='"+this.name+"']").html()},e}()},function(t,e){var n={}.hasOwnProperty;window.InputField=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.elem.on("keydown",(t=this,function(e){return t.trigger("field:keydown",e)})),this.elem.on("field:blur",function(t){return function(){return t.save()}}(this))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Field),e.prototype.SELECTOR="[contenteditable], textarea",e.prototype.isEmpty=function(){return 0===this.value().length},e.prototype.getMaxlength=function(){return this.elem.data("maxlength")},e.prototype.onBlur=function(){return this.trigger("field:blurring"),Utils.delay(1,(t=this,function(){return t.trigger("field:blur")}));var t},e.prototype.onFocus=function(){return this.trigger("field:focusing"),Utils.delay(1,(t=this,function(){return t.trigger("field:focus")}));var t},e}()},function(t,e){var n={}.hasOwnProperty;window.TextField=function(t){function e(){var t,n;e.__super__.constructor.apply(this,arguments),this.medium=new MediumEditor(this.elem,{toolbar:!1,keyboardCommands:!1,imageDragging:!1,disableReturn:!0,placeholder:{hideOnClick:Browser.ie||Browser.firefox}}),this.medium.subscribe("editableBlur",(n=this,function(){return n.onBlur()})),this.medium.subscribe("focus",function(t){return function(){return t.onFocus()}}(this)),this.medium.subscribe("editablePaste",function(t){return function(){return t.trigger("textField:paste")}}(this)),$(document).one("turbolinks:before-cache",function(t){return function(){return t.medium.destroy()}}(this)),this.elem.on("field:focus",function(t){return function(){return t.elem.children().attr("class",null)}}(this)),this.elem.on("click",function(t){return function(){if(Browser.mobile)return t.onFocus()}}(this)),(t=this.getMaxlength())&&this.elem.on("keypress",function(e){return function(n){if(e.value().length>=t)return n.preventDefault()}}(this)),Browser.ie&&new IEContenteditable(this.elem)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,InputField),e.prototype.SELECTOR='[data-field=""]',e.prototype.getValue=function(){return this.elem.text().trim()},e.prototype.setValue=function(t){return this.elem.text(t).setCaret(!1)&&this.refreshPlaceholders()},e.prototype.refreshPlaceholders=function(){return this.medium.trigger("editableInput",null,this.elem[0])},e.prototype.atStart=function(){return this.elem.editableCaretAtStart()},e.prototype.atEnd=function(){return this.elem.editableCaretAtEnd()},e.prototype.editableTextAfterCursor=function(){return this.elem.editableTextAfterCursor()},e.prototype.editableTextBeforeCursor=function(){return this.elem.editableTextBeforeCursor()},e}()},function(t,e){var n={}.hasOwnProperty;window.TextAreaField=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.replaceHtmlWithTextArea()}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,InputField),e.prototype.SELECTOR='[data-field="textarea"]',e.prototype.replaceHtmlWithTextArea=function(){var t;return this.textarea=this.findExistingTextArea(),0===this.textarea.length&&(this.textarea=this.createNewTextArea(),this.elem.html(this.textarea)),this.textarea.on("blur",(t=this,function(){return t.onBlur()})),this.textarea.on("focus",function(t){return function(){return t.onFocus()}}(this)),Utils.delay(1,function(t){return function(){return t.textarea.autosize()}}(this))},e.prototype.findExistingTextArea=function(){return this.elem.find("textarea")},e.prototype.createNewTextArea=function(){return $("<textarea />",{rows:1,val:this.elem.text().trim(),attr:{placeholder:this.elem.data("placeholder"),maxlength:this.getMaxlength(),dir:this.elem.data("dir-attribute")},style:"width: 100%; background: none; border: none; outline: none; resize: none; padding: 0;"})},e.prototype.getValue=function(){return this.textarea.val()},e.prototype.setValue=function(t){return this.textarea.val(t)},e.prototype.render=function(){return e.__super__.render.apply(this,arguments)&&this.replaceHtmlWithTextArea()},e.prototype.isFocused=function(){return this.textarea.is(":focus")},e.prototype.atStart=function(){return 0===this.cursorPosition()},e.prototype.atEnd=function(){return this.cursorPosition()===this.getValue().length},e.prototype.cursorPosition=function(){return this.textarea[0].selectionStart},e.prototype.editableTextBeforeCursor=function(){return this.getValue().substring(0,this.textarea[0].selectionStart)},e.prototype.editableTextAfterCursor=function(){return this.getValue().substring(this.textarea[0].selectionEnd,this.getValue().length)},e}()},function(t,e){var n={}.hasOwnProperty;window.ImageField=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.elem.on("image:change",(t=this,function(e,n){return t.value(n.id),t.save()}))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Field),e.prototype.SELECTOR="[data-field=image]",e.prototype.getValue=function(){return this.elem.data("field-value")},e.prototype.setValue=function(t){return this.elem.data("field-value",t)},e.prototype.render=function(){return e.__super__.render.apply(this,arguments)&&this.elem.loading(!1)},e}()},function(t,e){var n={}.hasOwnProperty;window.FieldGroup=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.elem.addClass("field-group"),this.elem.on("field:focusing",(function(){return $("body").addClass("focusing")})),this.elem.on("field:blurring",(function(){return $("body").removeClass("focusing")})),this.elem.on("field:focus",(t=this,function(){return t.elem.addClass("field-group--focused")})),this.elem.on("field:blur",function(t){return function(){if(!$(":focus").closest(InputField.prototype.SELECTOR).closest(t.elem).length)return t.elem.removeClass("field-group--focused")}}(this)),this.elem.on("mousedown touchstart",function(t){return function(e){return t.lastClicked=e.target}}(this)),this.elem.on("click",function(t){return function(e){if(t.lastClicked||(t.lastClicked=e.target),!$(t.lastClicked).closest(InputField.prototype.SELECTOR).length&&!$(t.lastClicked).closest("a, input").length)return t.elem.find(InputField.prototype.SELECTOR).first().focus()}}(this)),this.elem.on("field:focus",function(t){return function(e){return t.addHint(e.target)}}(this)),this.elem.on("field:blur",function(t){return function(){return t.removeHints()}}(this))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,DomElement),e.prototype.SELECTOR="[data-field-group]",e.prototype.addHint=function(t){var e;if(this.removeHints(),e=$(t).data("field-hint"))return this.elem.append("<small class='field-group__hint'>"+e+"</small>")},e.prototype.removeHints=function(){return this.elem.find(".field-group__hint").remove()},e}()},function(t,e){var n={}.hasOwnProperty;window.Editor=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.elem.addClass("editor--active"),Browser.mobile||this.elem.addClass("editor--pc"),this.elem.find(Record.prototype.SELECTOR).each((function(){return new Record(this)})),this.elem.find(RecordList.prototype.SELECTOR).each((function(){return new RecordList(this)})),this.ajaxCount=0,this.elem.on("editor:next",(t=this,function(){return t.tab(1)})),this.elem.on("editor:previous",function(t){return function(){return t.tab(-1)}}(this)),this.elem.on("editor:resave",function(t){return function(){return t.unsavedElements().trigger("element:resave")}}(this)),this.elem.on("field:keydown",function(t){return function(e,n){return t.onKeydown(e.originalEvent,n)&&e.preventDefault()}}(this)),this.elem.on("record:ajaxStart",function(t){return function(){if(t.ajaxCount+=1,t.ajaxCount>0)return t.trigger("editor:saving")}}(this)),this.elem.on("record:ajaxComplete",function(t){return function(){return t.ajaxCount-=1,t.unsavedElements().length?t.trigger("editor:failed"):0===t.ajaxCount?t.trigger("editor:saved"):void 0}}(this))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,DomElement),e.prototype.SELECTOR="[data-editable-by]",e.prototype.tab=function(t){return this.findNextTabbable(t).focus().setCaret(t>0)},e.prototype.findNextTabbable=function(t){var e;return e=this.allTabbables().index(this.currentField()),this.allTabbables().eq(e+t)},e.prototype.currentField=function(){return this.elem.find(":focus")},e.prototype.allTabbables=function(){return this.elem.find(InputField.prototype.SELECTOR+", a:tabbable").filter(":visible")},e.prototype.onKeydown=function(t,e){if(t.shiftKey)switch(t.which){case $.ui.keyCode.TAB:return this.tab(-1)}else switch(t.which){case $.ui.keyCode.TAB:return this.tab(1);case $.ui.keyCode.UP:if(e.atStart())return this.tab(-1);break;case $.ui.keyCode.DOWN:if(e.atEnd())return this.tab(1)}},e}()},function(t,e){$(document).on("ajaxError ajax:error",(function(t,e){return e||(e=t.detail[2]),401===e.status?($(".modal").modal("hide"),$("#modal").data({url:e.responseText}).modal()):422===e.status?$("#growl").text(e.responseText).slideDown("fast",(function(){return Utils.delay(3e3,(t=this,function(){return $(t).fadeOut()}));var t})):void 0}))},function(t,e){$(window).scroll(Utils.throttle((function(){var t,e;if($("#splash_primary_action").length){if(t=$("#header"),!$("#home_search").length&&t.hasClass("focused"))return;return e=$("#splash_primary_action").offset().top-$("#splash_primary_action").height(),t.toggleClass(t.data("toggle-class"),$(this).scrollTop()>e)}})))},function(t,e){$(document).on("page:show ajax:success record:added",(function(){return $("[data-ajax-upload]").ajaxUpload()})),$(document).on("image:start","[data-ajax-upload]",(function(){return $(this).loading()})),$(document).on("image:error","[data-ajax-upload]",(function(){return $(this).loading(!1)})),$(document).on("image:start","form",(function(){return $(this).find("input[type=submit]").prop("disabled",!0)})),$(document).on("image:change","form",(function(){return $(this).find("input[type=submit]").removeAttr("disabled")})),$(document).on("image:change","form [data-ajax-upload]",(function(t,e){var n;if((n=$(this).closest("form").find("input[id$=image_id]")).length)return n.val(e.id),$(this).replaceWith(e.html)})),$(document).on("image:delete","[data-ajax-upload]",(function(){return $(this).loading(),$.get($(this).data("ajax-upload"),(t=this,function(e){return $(t).trigger("image:change",e)}));var t})),$(document).on("click","[data-behavior~=delete_image]",(function(t){return $(this).trigger("image:delete"),t.preventDefault()}))},function(t,e){$(document).on("page:show ajax:success nested:fieldAdded state:change",(function(){return $("textarea").autosize()})),$(document).on("ajax:success","form",(function(t){return $(t.target).find("textarea").val("").autosize()})),$(document).on("keydown","[data-behavior~=submit_on_enter]",(function(t){if(13===t.which&&!t.shiftKey)return t.preventDefault(),Utils.submit($(this).closest("form"))})),$(document).on("keydown","[data-behavior~=blur_on_enter]",(function(t){if(13===t.which&&!t.shiftKey)return t.preventDefault(),$(this).blur()}))},function(t,e){$(document).on("page:show",(function(){return $(".modal--show").modal("show").on("hide.bs.modal",(function(){var t,e;if("#"!==(e=$(this).find("[data-dismiss=modal]").attr("href")))return Turbolinks.visit(e,{keep:!0}),t=$(window).height()-300,$("#main_contents").css({height:t}).loading()}))})),$(document).on("show.bs.modal",".modal",(function(t){var e;if((e=$(this).data("url")||$(t.relatedTarget).attr("href"))&&"#"!==e)return $(this).empty().loading({relative:!1,color:"#ffffff"}).load(e+" .modal >",(function(){return $(this).loading(!1).trigger("ajax:success").find("[autofocus]").focus(),$(this).removeData("url")}))}))},function(t,e){$(document).on("page:show",(function(){return $("[data-behavior=load-dropdown]").on("show.bs.dropdown",(function(t){var e;return e=$(this).find($(this).data("target")),$.ajax({url:$(t.relatedTarget).attr("href"),dataType:"script",complete:function(){return e.loading(!1).trigger("ajax:success")}})})).on("shown.bs.dropdown",(function(){return $(this).find($(this).data("target")).loading({relative:!1})}))})),window.Notifier=new Notifier(".notification_count")},function(t,e){var n;n=function(){function t(t,e){this.container=t,this.button_selector=e,this.captchaRendered=!1,this.language=this.container.data("language")}return t.prototype.form=function(){return $(""+this.button_selector).parents("form")},t.prototype.init=function(){return this.setCallback(),this.loadRecaptchaScript(),this.setEventHandlers()},t.prototype.addRecaptchaToken=function(t){return $("<input />").appendTo(this.form()).attr({type:"hidden",name:"g-recaptcha-response",value:t})},t.prototype.onRecaptchaSuccess=function(t){return this.addRecaptchaToken(t),Utils.submit(this.form())},t.prototype.onRecaptchaLoad=function(){return this.renderCaptcha()},t.prototype.renderCaptcha=function(){if(this.shouldRenderCaptcha())return grecaptcha.render(this.container[0],{callback:this.onRecaptchaSuccess.bind(this)}),this.captchaRendered=!0},t.prototype.shouldRenderCaptcha=function(){return!this.captchaRendered&&this.form().is(":visible")},t.prototype.setCallback=function(){return window.cookpadRecaptchaLoad=this.onRecaptchaLoad.bind(this)},t.prototype.loadRecaptchaScript=function(){return $.getScript("https://www.recaptcha.net/recaptcha/api.js?hl="+this.language+"&render=explicit&onload=cookpadRecaptchaLoad")},t.prototype.setEventHandlers=function(){return this.setClickHandlers()},t.prototype.setClickHandlers=function(){return $(document).on("click",this.button_selector,(function(t){return t.preventDefault(),grecaptcha.execute()})),$(document).on("click","[data-recaptcha~=render]",function(t){return this.renderCaptcha()}.bind(this))},t}(),$(document).on("page:show",(function(){var t;if((t=$("#recaptcha")).length>0)return new n(t,"[data-recaptcha~=trigger]").init()}))},function(t,e){$(document).on("click","[data-behavior=print]",(function(t){return t.preventDefault(),window.print(),$.ajax({type:"POST",url:$(this).data("url"),async:!1})})),$(document).on("touchstart","[data-behavior~=handle]",(function(){return $(":focus").blur()})),$(document).on("page:show",(function(){var t,e;return e=/^data-+/,(t=$.fn.tooltip.Constructor.DEFAULTS.whiteList).div=[e,"style"],$("[data-toggle=popover]").popover({whiteList:t}).dismissible()})),$(document).on("page:show ajax:success",(function(){return $('[data-toggle="tooltip"]').tooltip()})),$(document).on("page:show",(function(){return $("[data-editable-by="+App.currentUser+"]").each((function(){return new Editor(this)}))})),$(document).on("page:show ajax:success",(function(){return $("[data-placeholder]").each((function(){if(!$.trim($(this).text()))return $(this).addClass("placeholder")}))})),$(document).on("editor:saving",(function(){return $("#saver").state("saving")})),$(document).on("editor:saved",(function(){return $("[data-behavior~=publish]").prop("disabled",!1),$("#saver").state("saved")})),$(document).on("editor:failed",(function(){return $("[data-behavior~=publish]").prop("disabled",!0),$("#saver").state("failed")})),$(document).on("click","[data-behavior~=publish]",(function(t){if("saving"===$("#saver").state())return t.preventDefault(),$(document).one("editor:saved",(e=this,function(){return Utils.submit($(e).closest("form"))}));var e})),$(document).on("click","[data-behavior~=retry_unsaved]",(function(t){return $($(this).attr("href")).trigger("editor:resave"),t.preventDefault()})),$(document).on("click","[data-behavior~=delete]",(function(t){return t.preventDefault(),$(":focus").blur(),Utils.delay(1,(e=this,function(){if(confirm($(e).data("message")))return $(e).trigger("record:delete")}));var e}))},function(t,e){$(document).on("submit","[data-behavior~=rewrite_url]",(function(){var t,e,n,i,r;return n=$(this).find($(this).data("source")),r=$.trim($(n).val()),i=(e=$(this).attr("action").split("?"))[0],t=e[1],i=i+"/"+encodeURIComponent(r),t&&(i=i+"?"+t),Turbolinks.visit(i),n.blur(),!1})),$(document).on("page:show",(function(){return $("[data-suggestions]").each((function(){return $(this).autocomplete({serviceUrl:$(this).data("suggestions"),paramName:$(this).attr("name"),appendTo:$(this).parent(),triggerSelectOnValidInput:!1,maxHeight:300,minChars:0,noCache:!0,onSelect:function(t){var e;return null!=(null!=(e=t.data)?e.url:void 0)?Turbolinks.visit(t.data.url):Utils.submit($(this).closest("form").appendParam("event","search.suggestion"))},formatResult:function(t,e){var n;return null!=(null!=(n=t.data)?n.html:void 0)?t.data.html:e.match(/[\u0600-\u06FF]/)?t.value:$.Autocomplete.defaults.formatResult(t,e)}})})),$("[data-behavior~=search_field]").syncInput((function(){return $(this).parent().toggleClass("typing",$(this).val().length>0)}))})),$(document).on("focus blur","[data-behavior~=search_field]",(function(t){return Utils.delay(0,(e=this,function(){return $(e).closest($(e).data("container")).toggleClass("overlay","focusin"===t.type)}));var e})),$(document).on("touchend","[data-behavior~=cancel_search]",(function(t){var e;return e=$(this).data("target"),$(e).blur().autocomplete("hide"),!1})),$(document).on("touchstart","[data-behavior~=clear_input]",(function(t){var e;return e=$(this).attr("href"),$(e).val("").trigger("input").focus(),!1})),$(document).on("page:show",(function(){return $("[data-highlight-words]").each((function(){return $(this).highlightWords({wordsToHighlight:$(this).data("highlight-words"),connector:$(this).data("highlight-words-connector"),htmlClass:$(this).data("highlight-words-class")})}))}))},function(t,e){$(document).on("click","[data-require-login=true]",(function(t){if(!App.currentUser)return t.stopImmediatePropagation(),$(".modal").modal("hide"),$("#modal").data({url:App.login_path}).modal(),!1}))},function(t,e){$(document).on("ajax:before submit","[data-behavior~=spinner]",(function(){return $(this).parent().loading({lines:8,radius:3})})),$(document).on("ajax:success","[data-behavior~=spinner]",(function(){return $(this).parent().loading(!1)})),$(document).on("ajax:before","[data-behavior~=spinner-inline]",(function(){return $(this).loading({lines:8,radius:3,left:"1em"})})),$(document).on("ajax:complete","[data-behavior~=spinner-inline]",(function(){return $(this).loading(!1)}))},function(t,e){$(document).on("click","[data-behavior~=add_step]",(function(){return $("#steps ol").trigger("recordList:append"),!1})),$(document).on("keydown","[data-behavior~=add_step]",(function(t){if(t.shiftKey&&t.which===$.ui.keyCode.TAB||t.which===$.ui.keyCode.UP)return $(this).trigger("editor:previous"),t.preventDefault()}))},function(t,e){$(document).on("click","[data-track-search]",(function(t){var e,n;if($(t.target).closest("a").length)return e=$(this).data("track-search"),(n=$(t.target).closest("[data-id]")).length?$.ajax({type:"POST",url:e.url,async:Turbolinks.supported,data:{event:e.event,order:e.order,recipe_id:n.data("id"),fetched_recipe_ids:e.fetched_recipe_ids,position:parseInt(e.offset)+n.index()+1,total_hits:e.total_hits,keyword:e.keyword,referer:e.referer}}):void 0})),$(document).on("click","[data-track-user-search]",(function(t){var e,n;if($(t.target).closest("a").length)return e=$(this).closest("[data-track-user-search]").data("track-user-search"),n=$(t.target).closest("[data-id]"),$.ajax({type:"POST",url:e.url,async:Turbolinks.supported,data:{event:"user.search_click",user_id:n.data("id"),position:parseInt(e.offset)+n.index()+1,total_hits:e.total_hits,keyword:e.keyword,referer:e.referer}})})),$(document).on("click","[data-click-log]",(function(){var t;return(t=$(this).data("click-log")).params.client_time=(new Date).getTime()/1e3|0,$.ajax({type:"POST",url:t.url,async:Turbolinks.supported,data:t.params})}))},function(t,e,n){},,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(136),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(164),n(165),n(166),n(167),n(168),n(170),n(171),n(174),n(69),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(190),n(191),n(192),n(193),n(194),n(196),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(229),n(230),n(231),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(120),n(279),n(280),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(345),n(346),n(348),n(349),n(350),n(351),n(353),n(124),n(125),n(395),n(470),n(471),n(472),n(473),n(474),n(476),n(477),n(478),n(126);var i=n(0),r=n(56),o=i.a.start(),a=n(479);o.load(Object(r.a)(a));var s=n(73),u=n.n(s);window.Cookies=u.a;n(127);var c=n(95);$.fn.extend({ajaxUpload:function(t){return this.each((function(){var e,n,i;return e={start:(i=this,function(){return $(i).trigger("image:start")}),error:function(t){return function(){return $(t).trigger("image:error")}}(this),done:function(t){return function(e,n){return $(t).trigger("image:change",n.result)}}(this)},t={dropZone:$(this)},$(this).addClass("droppable"),n=$(this).find("input[type=file]")[0],Object(c.a)(n,$(this).data("ajax-upload"),e,t)}))}}),$(document).on("dragbetterenter",(function(){return $(".droppable").addClass("droppable--dropping")})),$(document).on("dragbetterleave",(function(){return Utils.delay(10,(function(){return $(".droppable").removeClass("droppable--dropping")}))}));n(512),n(513),n(514),n(130),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(128),n(359),n(360),n(361),n(362),n(363),n(522),n(396),n(397),n(135),n(527),n(528),n(354),n(355),n(529),n(357),n(358),n(530),n(356),n(531);function l(t,e,n,i){var r,o=!1,a=0;function s(){r&&clearTimeout(r)}function u(){var u=this,c=Date.now()-a,l=arguments;function f(){a=Date.now(),n.apply(u,l)}o||(i&&!r&&f(),s(),void 0===i&&c>t?f():!0!==e&&(r=setTimeout(i?function(){r=void 0}:f,void 0===i?t-c:t)))}return"boolean"!=typeof e&&(i=n,n=e,e=void 0),u.cancel=function(){s(),o=!0},u}var f=n(16);n.n(f).a.throttle=l;var h=n(402),d=n.n(h),p={threshold:50,class_initial:"".concat("lazy-image","--initial"),class_loading:"".concat("lazy-image","--loading"),class_loaded:"".concat("lazy-image","--loaded"),class_error:"".concat("lazy-image","--error"),elements_selector:".".concat("lazy-image"),data_src:"original"},m=new d.a(p);["turbolinks:load","ajax:success"].forEach((function(t){document.addEventListener(t,(function(){m.update()}))}));n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561)},,,function(t,e,n){"use strict";n.r(e);var i=n(0);n(10);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.padding=10,this.popoverWidth=e.offsetWidth,this.popoverHeight=e.offsetHeight,this.popoverContainer=e.offsetParent}var e,n,i;return e=t,(n=[{key:"coordinates",value:function(t){var e=this._elementPositionInContainer(t);return{top:e.y-this._verticalAdjustment(t),left:e.x-this._horizontalAdjustment(t)}}},{key:"_elementPositionInContainer",value:function(t){for(var e=t.offsetWidth,n=t.offsetHeight;t!=this.popoverContainer;)e+=t.offsetLeft-t.scrollLeft+t.clientLeft,n+=t.offsetTop-t.scrollTop+t.clientTop,t=t.offsetParent;return{x:e,y:n}}},{key:"_verticalSpace",value:function(t){return this.viewportHeight-t.getBoundingClientRect().bottom}},{key:"_horizontalSpace",value:function(t){return this.viewportWidth-t.getBoundingClientRect().right}},{key:"_verticalAdjustment",value:function(t){return Math.max(this.popoverHeight+this.padding-this._verticalSpace(t),0)}},{key:"_horizontalAdjustment",value:function(t){return Math.max(this.popoverWidth+this.padding-this._horizontalSpace(t),0)}},{key:"viewportHeight",get:function(){return window.innerHeight}},{key:"viewportWidth",get:function(){return window.innerWidth}}])&&r(e.prototype,n),i&&r(e,i),t}();function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"default",(function(){return l}));var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,u(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){this.popoverPosition=new o(this.element),this.element.style.visibility="visible",this._hidePicker()}},{key:"open",value:function(t){this.onEmojiSelect=t.detail.onEmojiSelect,this._showPicker(this.popoverPosition.coordinates(t.target))}},{key:"close",value:function(t){this._openingPicker(t)||this._clickedInPicker(t)||this._hidePicker()}},{key:"select",value:function(t){this.onEmojiSelect(t.currentTarget.innerText),this._hidePicker()}},{key:"goToCategory",value:function(t){this.categoriesTarget.scrollTop=this._categoryScrollPosition(t.currentTarget)}},{key:"_showPicker",value:function(t){this.element.style.left=t.left+"px",this.element.style.top=t.top+"px",this.element.classList.remove(this.hideClass)}},{key:"_hidePicker",value:function(){this.element.classList.add(this.hideClass)}},{key:"_categoryScrollPosition",value:function(t){var e=parseInt(t.dataset.categoryIndex);return this.categoryTargets[e].offsetTop}},{key:"_openingPicker",value:function(t){return"true"==t.target.dataset[this.openButtonAttribute]}},{key:"_clickedInPicker",value:function(t){return this.element.contains(t.target)}},{key:"openButtonAttribute",get:function(){return this.data.get("openButtonAttribute")}},{key:"hideClass",get:function(){return this.data.get("hideClass")}}])&&a(n.prototype,i),r&&a(n,r),e}(i.b);l.targets=["category","categories"]}]);
//# sourceMappingURL=application-1c5e037e002754c6d518-1.js.map